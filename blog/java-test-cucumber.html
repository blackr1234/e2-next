<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="blog/2024-02/java-test-cucumber/Eclipse-JUnit-view.png"/><link rel="preload" as="image" href="blog/2024-02/java-test-cucumber/mvn-test-result.png"/><link rel="stylesheet" href="/e2-next/_next/static/css/d3df112486f97f47.css" data-precedence="next"/><link rel="stylesheet" href="/e2-next/_next/static/css/c3624a693ae5a0c4.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/e2-next/_next/static/chunks/webpack-f088da4552bcc253.js"/><script src="/e2-next/_next/static/chunks/4bd1b696-120f4d9c40d223dd.js" async=""></script><script src="/e2-next/_next/static/chunks/1517-c8d232d43a11224c.js" async=""></script><script src="/e2-next/_next/static/chunks/main-app-05c45cc8f30d6cea.js" async=""></script><script src="/e2-next/_next/static/chunks/7829-b7b9eb1dbe0d40e4.js" async=""></script><script src="/e2-next/_next/static/chunks/2153-45fd9844831c6348.js" async=""></script><script src="/e2-next/_next/static/chunks/app/layout-ea91c2d128ec48c2.js" async=""></script><script src="/e2-next/_next/static/chunks/app/page-c8b940db14fac9a0.js" async=""></script><title>Michael Chung&#x27;s e-Portfolio</title><meta name="description" content="Powered by Next.js and React"/><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/><script src="/e2-next/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="vstack gap-5"><div class="text-center vstack gap-5"><div><code class="SiteHeader_name__cwQmL">Chung Cheuk Hang Michael</code><code class="SiteHeader_title__CCfvI">Java Web Developer</code></div><nav class="justify-content-center navbar navbar-expand-md navbar-dark"><button type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="justify-content-center navbar-collapse collapse"><div class="justify-content-center navbar-nav nav-underline"><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/" class="nav-link" href="/e2-next">Home</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/work" class="nav-link" href="/e2-next/work">Work</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/hobbyProjects" class="nav-link" href="/e2-next/hobbyProjects">Hobby projects</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/personality" class="nav-link" href="/e2-next/personality">Personality</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/blog" class="nav-link" href="/e2-next/blog">Blog</a></div></div></div></nav></div><h1>6 Cucumber</h1>
<p>Cucumber 係一個專門做 behavior-driven development（BDD）testing 既 library，我地通常會喺用家既角度去測試我地既 Spring Boot 項目既 behaviors。</p>
<p>有別於 JUnit、Mocktio 呢啲用黎測試 single layer 既 libraries，BDD testing 既目的係根據用家提供既 user stories（需求場景）去設計 test cases。寫 BDD test cases 既時候，我地會用 natural language（例如英文）去描述每一個 behavior。我地想用 BDD testing 測試既野可以係類似購物落單流程、會員註冊流程既呢啲牽涉多個 Java classes 或者 Spring components 既業務功能。除左複雜既業務流程或者功能，我地都可以用 Cucumber 黎寫 REST API test cases，甚至測試 front-end 功能既 Selenium web tests。</p>
<p>Cucumber BDD tests 既描述檔用既係 Gherkin syntax，簡單黎講就係 Given-When-Then 既流程次序，如果寫過 Mockito BDD tests 既話應該唔會對 Given-When-Then 陌生。</p>
<p>以下係一個符合 BDD 既例子：</p>
<pre><code class="language-plaintext">Feature: Keyword search with Google

  Scenario: A Google text search
    Given the web browser is displaying the Google Search home page
    When I enter &quot;cucumber&quot; as the search keyword
	And I click the Search button
    Then search results for &quot;cucumber&quot; should be shown
</code></pre>
<h2>6.1 Gherkin keywords</h2>
<p>以下係一啲常用既 Gherkin keywords：</p>
<table><thead><tr><th>Keyword</th><th>用途</th></tr></thead><tbody><tr><td><code>Feature</code></td><td>佢係每個 Cucumber <code>.feature</code> 檔案既第一句，描述呢個系統功能係大概關於啲乜野。</td></tr><tr><td><code>Scenario</code>／<code>Example</code></td><td>佢係 under <code>Feature</code> 下面唔同既 BDD 場景。</td></tr><tr><td><code>Scenario Outline</code>／<code>Scenario Template</code></td><td>同 <code>Scenario</code> 既 structure 基本上一樣，但佢係「parameterized」版本既 <code>Scenario</code>，係實際會執行既 scenario 既 template，需要配合 <code>Examples</code> 裡面唔同既 test parameters 黎多次執行自己。</td></tr><tr><td><code>Given</code></td><td>佢係 under <code>Scenario</code> 或者 <code>Scenario Outline</code> 既語句，一般係用黎描述 test data setup。</td></tr><tr><td><code>When</code></td><td>佢係 under <code>Scenario</code> 或者 <code>Scenario Outline</code> 既語句，一般係用黎描述用家既行為。</td></tr><tr><td><code>Then</code></td><td>佢係 under <code>Scenario</code> 或者 <code>Scenario Outline</code> 既語句，一般係用黎描述期望既結果。</td></tr><tr><td><code>And</code></td><td>佢係 under <code>Scenario</code> 或者 <code>Scenario Outline</code> 既語句，承接上一句既 keyword，例如 <code>When</code> A <code>And</code> B、<code>Given</code> A <code>And</code> B 以及 <code>Then</code> A <code>And</code> B。</td></tr><tr><td><code>Examples</code>／<code>Scenarios</code></td><td>如果用 <code>Scenario Outline</code> 實現 parameterized test，我地就需要提供 <code>Examples</code> 黎作為每個實際 scenario 既 test parameters。</td></tr></tbody></table>
<hr/>
<h2>6.2 Maven dependencies</h2>
<pre><code class="language-xml">&lt;parent&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
	&lt;version&gt;3.2.3&lt;/version&gt;
&lt;/parent&gt;

&lt;dependencyManagement&gt;
	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;io.cucumber&lt;/groupId&gt;
			&lt;artifactId&gt;cucumber-bom&lt;/artifactId&gt;
			&lt;version&gt;7.15.0&lt;/version&gt;
			&lt;type&gt;pom&lt;/type&gt;
			&lt;scope&gt;import&lt;/scope&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

&lt;dependencies&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
		&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
	&lt;/dependency&gt;

	&lt;!-- database --&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
		&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;com.mysql&lt;/groupId&gt;
		&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;
	&lt;/dependency&gt;

	&lt;dependency&gt;
		&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
		&lt;artifactId&gt;lombok&lt;/artifactId&gt;
		&lt;scope&gt;provided&lt;/scope&gt;
	&lt;/dependency&gt;

	&lt;dependency&gt;
		&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
		&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
	&lt;/dependency&gt;

	&lt;!-- testing --&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
		&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
		&lt;scope&gt;test&lt;/scope&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;com.h2database&lt;/groupId&gt;
		&lt;artifactId&gt;h2&lt;/artifactId&gt;
		&lt;scope&gt;test&lt;/scope&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;io.cucumber&lt;/groupId&gt;
		&lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;
		&lt;scope&gt;test&lt;/scope&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;io.cucumber&lt;/groupId&gt;
		&lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;
		&lt;scope&gt;test&lt;/scope&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;io.cucumber&lt;/groupId&gt;
		&lt;artifactId&gt;cucumber-spring&lt;/artifactId&gt;
		&lt;scope&gt;test&lt;/scope&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;
		&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt; &lt;!-- JUnit 4 --&gt;
		&lt;scope&gt;test&lt;/scope&gt;
	&lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>註：</p>
<ul>
<li>我地既 BDD test 會用 H2 database，以免連線到真既 MySQL database。</li>
<li>我地用左 <code>cucumber-bom</code> 黎控制 Cucumber test dependencies 既版本號碼。</li>
<li>我地需要用返 JUnit 4，所以要加 <code>junit-vintage-engine</code> 既 test dependency。</li>
</ul>
<hr/>
<h2>6.3 寫 Java code</h2>
<p>Project structure：</p>
<ul>
<li><code>src/main/java</code>
<ul>
<li><code>/code</code>
<ul>
<li><code>/controller</code>
<ul>
<li><code>UserController.java</code></li>
</ul>
</li>
<li><code>/entity</code>
<ul>
<li><code>UserEntity.java</code></li>
</ul>
</li>
<li><code>/repo</code>
<ul>
<li><code>UserRepo.java</code></li>
</ul>
</li>
<li><code>/service</code>
<ul>
<li><code>UserService.java</code></li>
</ul>
</li>
<li><code>MainApplication.java</code></li>
</ul>
</li>
</ul>
</li>
<li><code>src/test/java</code>
<ul>
<li><code>/code</code>
<ul>
<li><code>/user</code>
<ul>
<li><code>CucumberSpringConfig.java</code></li>
<li><code>UserSteps.java</code></li>
</ul>
</li>
<li><code>UserTest.java</code></li>
</ul>
</li>
</ul>
</li>
<li><code>src/test/resources</code>
<ul>
<li><code>/features</code>
<ul>
<li><code>/user</code>
<ul>
<li><code>basic.feature</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code>UserController</code>、<code>UserEntity</code>、<code>UserRepo</code>、<code>UserService</code> 都係一啲基本既 Spring components，呢度就唔特別寫出黎。</p>
<p>下面寫既 Java classes 係 Cucumber 需要用到既。</p>
<p><code>CucumberSpringConfig.java</code>：</p>
<pre><code class="language-java">@CucumberContextConfiguration
@SpringBootTest(
    classes = MainApplication.class,
    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
public class CucumberSpringConfig {

}
</code></pre>
<p><code>UserTest.java</code>：</p>
<pre><code class="language-java">@RunWith(Cucumber.class)
@CucumberOptions(
    features = {
        &quot;src/test/resources/features&quot;
    },
    glue = &quot;code.user&quot;
)
public class UserTest {

}
</code></pre>
<p><code>UserSteps.java</code>：</p>
<pre><code class="language-java">@Slf4j
public class UserSteps {

    @Autowired UserRepo userRepo;
    @LocalServerPort int port;
    RestClient client = RestClient.builder().build();

    List&lt;UserEntity&gt; users;



    @Given(&quot;{int} users have registered&quot;)
    public void someNumberOfUsersHaveRegistered(int databaseUserCount) {

        // 用呢句黎測試一下 &quot;users&quot; instance field 既 scope，我地會發現每次都係 print null。
        System.out.println(&quot;Mick: &quot; + users);

        userRepo.deleteAll();

        IntStream.rangeClosed(1, databaseUserCount)
            .mapToObj(this::createTestUser).forEach(userRepo::save);

        final long userCount = userRepo.count();

        log.info(&quot;User table now has {} records.&quot;, userCount);
    }

    @When(&quot;I make a request to get all users&quot;)
    public void makeRequestToGetAllUsers() {
        users = client.get().uri(getUrl(&quot;/users&quot;)).retrieve()
                    .body(new ParameterizedTypeReference&lt;&gt;() {});
    }

    @When(&quot;I make a request to get page {int} of all users with page size of {int}&quot;)
    public void makeRequestToGetPageOfSomeNumberAllUsersWithPageSizeOfSomeNumber(int page, int size) throws Exception {
        final JsonNode node = client.get().uri(getUrl(format(&quot;/users/paged?page=%d&amp;size=%d&quot;, page, size))).retrieve()
                    .body(JsonNode.class);
        users = new JsonMapper().readerForListOf(UserEntity.class).readValue(node.get(&quot;content&quot;));
        users.forEach(System.out::println);
    }

    @Then(&quot;the response should give me exactly {int} users&quot;)
    public void responseShouldReturnSomeNumberOfUsers(int userCount) {
        assertEquals(userCount, users.size());
    }

    @Then(&quot;every user is different&quot;)
    public void everyUserIsDifferent() {
        final Set&lt;Long&gt; userIds = users.stream().map(UserEntity::getId).collect(Collectors.toSet());
        assertEquals(users.size(), userIds.size());
    }



    private String getUrl(String path) {
        return &quot;http://localhost:&quot; + port + path;
    }

    private UserEntity createTestUser(int id) {

        final UserEntity user = new UserEntity();
        user.setName(RandomStringUtils.randomAlphabetic(20));
        user.setUserType(&quot;NORMAL&quot;);
        user.setRegisterDatetime(new Timestamp(System.currentTimeMillis()));
        user.setEmail(RandomStringUtils.randomAlphabetic(20) + &quot;@example.com&quot;);

        return user;
    }
}
</code></pre>
<p>解釋：</p>
<ul>
<li>我地喺 <code>UserSteps</code> 裡面寫既 <code>@Given</code>、<code>@When</code>、<code>@Then</code> method annotations 既 <code>value</code> 係對應返我地既 <code>.feature</code> 檔既 behavior 描述。<!-- -->
<ul>
<li>其實全部 methods annotate 曬做 <code>@Given</code>、<code>@When</code>、<code>@Then</code> 既其中一種都可以，唔需要 exactly match <code>.feature</code> 檔裡面 scenario 既 keywords。</li>
<li><code>@Given</code>、<code>@When</code>、<code>@Then</code> 可以用 <code>{int}</code>、<code>{string}</code> 之類既 placeholders 黎對應返 method arguments。</li>
</ul>
</li>
<li>我地可以用 instance fields 黎喺同一個 scenario 裡面既 Given-When-Then 之間 share data。<!-- -->
<ul>
<li>除非用到 Spring 既 annotations，否則一般既 instance fields 都會喺 scenario 開始既時候清除（<code>null</code>），例如 <code>UserSteps</code> 既 <code>List&lt;UserEntity&gt; users</code>。</li>
</ul>
</li>
</ul>
<hr/>
<h2>6.4 寫 Cucumber <code>.feature</code> 檔</h2>
<pre><code class="language-plaintext">Feature: User features

  Scenario Outline: Get All - &lt;userCount&gt; users when there are &lt;userCount&gt; users
    Given &lt;userCount&gt; users have registered
    When I make a request to get all users
    Then the response should give me exactly &lt;userCount&gt; users
    And every user is different

    Examples:
      | userCount |
      |         0 |
      |         1 |
      |        10 |

  Scenario Outline: Get All (Paged) - &lt;expectedUserCount&gt; users when getting page &lt;page&gt; with size of &lt;size&gt; when there are &lt;userCount&gt; users
    Given &lt;userCount&gt; users have registered
    When I make a request to get page &lt;page&gt; of all users with page size of &lt;size&gt;
    Then the response should give me exactly &lt;expectedUserCount&gt; users
    And every user is different

    Examples:
      | userCount | size | page | expectedUserCount |
      |         0 |    0 |    0 |                 0 |
      |         1 |    1 |    0 |                 1 |
      |         5 |    3 |    0 |                 3 |
      |         5 |    3 |    1 |                 2 |
      |        50 |   23 |    0 |                23 |
      |        50 |   23 |    1 |                23 |
      |        50 |   23 |    2 |                 4 |
</code></pre>
<hr/>
<h2>6.5 測試</h2>
<h3>6.5.1 Eclipse 執行 JUnit test</h3>
<p>當我地喺 Eclipse 度用 JUnit 4 執行 <code>UserTest</code>，就會見到以下 JUnit view 既結果：</p>
<p><img src="blog/2024-02/java-test-cucumber/Eclipse-JUnit-view.png" alt=""/></p>
<hr/>
<h3>6.5.2 Maven CLI</h3>
<p>我地執行 <code>mvn test</code> 就會見到以下既結果：</p>
<p><img src="blog/2024-02/java-test-cucumber/mvn-test-result.png" alt=""/></p>
<p>註：</p>
<ul>
<li>Maven Surefire Plugin 有幾個默認既 test class naming patterns，如果我地既 test classes 唔 follow 呢啲 naming patterns，個 plugin 就會無視我地既 test classes。<!-- -->
<ul>
<li>其中一個默認既 naming pattern 係 test class name 要帶有 <code>Test</code> 既 suffix，就好似我地既 <code>UserTest</code> 咁。</li>
</ul>
</li>
</ul>
<hr/>
<h2>6.6 參考資料</h2>
<ul>
<li><a href="https://automationpanda.com/2017/01/27/bdd-101-gherkin-by-example/">BDD 101: Gherkin By Example</a></li>
<li><a href="https://cucumber.io/docs/gherkin/reference/">Cucumber 官方文檔 - Gherkin Reference</a></li>
<li><a href="https://cucumber.io/docs/cucumber/step-definitions/?lang=java">Cucumber 官方文檔 - Step Definitions</a></li>
<li><a href="https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html">Maven 官方文檔 - Inclusions and Exclusions of Tests</a></li>
<li><a href="https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html#configuring-junit-platform">Maven 官方文檔 - Using JUnit 5 Platform - Configuring JUnit Platform</a></li>
</ul><hr/><div class="vstack gap-3"><div class="text-center container"><div class="justify-content-center g-3 row row-cols-md-3 row-cols-sm-2 row-cols-1"><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="tel:+85263301333"><div class="card-body"><div class="card-title h5"><i class="fa-solid fa-phone" style="color:#009688"></i></div><p class="text-muted card-text">6330 1333<!-- --> </p></div></a></div><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="mailto:michaelboyboy@gmail.com"><div class="card-body"><div class="card-title h5"><i class="fa-solid fa-envelope" style="color:#f44336"></i></div><p class="text-muted card-text">michaelboyboy@gmail.com<!-- --> </p></div></a></div><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="https://www.linkedin.com/in/mickchung"><div class="card-body"><div class="card-title h5"><i class="fa-brands fa-linkedin" style="color:#2196f3"></i></div><p class="text-muted card-text">www.linkedin.com/in/mickchung<!-- --> </p></div></a></div></div></div></div></div><script src="/e2-next/_next/static/chunks/webpack-f088da4552bcc253.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[8287,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n3:I[3339,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n4:I[1367,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n5:I[5244,[],\"\"]\n6:I[3866,[],\"\"]\n7:I[4798,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n8:I[6121,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n9:I[3667,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\na:I[8407,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nb:I[8173,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"\"]\nc:I[3197,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nd:I[7933,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\ne:I[3800,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n12:I[6213,[],\"OutletBoundary\"]\n14:I[6213,[],\"MetadataBoundary\"]\n16:I[6213,[],\"ViewportBoundary\"]\n18:I[4835,[],\"\"]\n:HL[\"/e2-next/_next/static/css/d3df112486f97f47.css\",\"style\"]\n:HL[\"/e2-next/_next/static/css/c3624a693ae5a0c4.css\",\"style\"]\nf:T7a0,\u003cparent\u003e\r\n\t\u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e\r\n\t\u003cartifactId\u003espring-boot-starter-parent\u003c/artifactId\u003e\r\n\t\u003cver"])</script><script>self.__next_f.push([1,"sion\u003e3.2.3\u003c/version\u003e\r\n\u003c/parent\u003e\r\n\r\n\u003cdependencyManagement\u003e\r\n\t\u003cdependencies\u003e\r\n\t\t\u003cdependency\u003e\r\n\t\t\t\u003cgroupId\u003eio.cucumber\u003c/groupId\u003e\r\n\t\t\t\u003cartifactId\u003ecucumber-bom\u003c/artifactId\u003e\r\n\t\t\t\u003cversion\u003e7.15.0\u003c/version\u003e\r\n\t\t\t\u003ctype\u003epom\u003c/type\u003e\r\n\t\t\t\u003cscope\u003eimport\u003c/scope\u003e\r\n\t\t\u003c/dependency\u003e\r\n\t\u003c/dependencies\u003e\r\n\u003c/dependencyManagement\u003e\r\n\r\n\u003cdependencies\u003e\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003espring-boot-starter-web\u003c/artifactId\u003e\r\n\t\u003c/dependency\u003e\r\n\r\n\t\u003c!-- database --\u003e\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003espring-boot-starter-data-jpa\u003c/artifactId\u003e\r\n\t\u003c/dependency\u003e\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003ecom.mysql\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003emysql-connector-j\u003c/artifactId\u003e\r\n\t\u003c/dependency\u003e\r\n\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003eorg.projectlombok\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003elombok\u003c/artifactId\u003e\r\n\t\t\u003cscope\u003eprovided\u003c/scope\u003e\r\n\t\u003c/dependency\u003e\r\n\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003eorg.apache.commons\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003ecommons-lang3\u003c/artifactId\u003e\r\n\t\u003c/dependency\u003e\r\n\r\n\t\u003c!-- testing --\u003e\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003espring-boot-starter-test\u003c/artifactId\u003e\r\n\t\t\u003cscope\u003etest\u003c/scope\u003e\r\n\t\u003c/dependency\u003e\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003ecom.h2database\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003eh2\u003c/artifactId\u003e\r\n\t\t\u003cscope\u003etest\u003c/scope\u003e\r\n\t\u003c/dependency\u003e\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003eio.cucumber\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003ecucumber-java\u003c/artifactId\u003e\r\n\t\t\u003cscope\u003etest\u003c/scope\u003e\r\n\t\u003c/dependency\u003e\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003eio.cucumber\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003ecucumber-junit\u003c/artifactId\u003e\r\n\t\t\u003cscope\u003etest\u003c/scope\u003e\r\n\t\u003c/dependency\u003e\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003eio.cucumber\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003ecucumber-spring\u003c/artifactId\u003e\r\n\t\t\u003cscope\u003etest\u003c/scope\u003e\r\n\t\u003c/dependency\u003e\r\n\t\u003cdependency\u003e\r\n\t\t\u003cgroupId\u003eorg.junit.vintage\u003c/groupId\u003e\r\n\t\t\u003cartifactId\u003ejunit-vintage-engine\u003c/artifactId\u003e \u003c!-- JUnit 4 --\u003e\r\n\t\t\u003cscope\u003etest\u003c/scope\u003e\r\n\t\u003c/dependency\u003e\r\n\u003c/dependencies\u003e\n10:T994,"])</script><script>self.__next_f.push([1,"@Slf4j\r\npublic class UserSteps {\r\n\r\n    @Autowired UserRepo userRepo;\r\n    @LocalServerPort int port;\r\n    RestClient client = RestClient.builder().build();\r\n\r\n    List\u003cUserEntity\u003e users;\r\n\r\n\r\n\r\n    @Given(\"{int} users have registered\")\r\n    public void someNumberOfUsersHaveRegistered(int databaseUserCount) {\r\n\r\n        // 用呢句黎測試一下 \"users\" instance field 既 scope，我地會發現每次都係 print null。\r\n        System.out.println(\"Mick: \" + users);\r\n\r\n        userRepo.deleteAll();\r\n\r\n        IntStream.rangeClosed(1, databaseUserCount)\r\n            .mapToObj(this::createTestUser).forEach(userRepo::save);\r\n\r\n        final long userCount = userRepo.count();\r\n\r\n        log.info(\"User table now has {} records.\", userCount);\r\n    }\r\n\r\n    @When(\"I make a request to get all users\")\r\n    public void makeRequestToGetAllUsers() {\r\n        users = client.get().uri(getUrl(\"/users\")).retrieve()\r\n                    .body(new ParameterizedTypeReference\u003c\u003e() {});\r\n    }\r\n\r\n    @When(\"I make a request to get page {int} of all users with page size of {int}\")\r\n    public void makeRequestToGetPageOfSomeNumberAllUsersWithPageSizeOfSomeNumber(int page, int size) throws Exception {\r\n        final JsonNode node = client.get().uri(getUrl(format(\"/users/paged?page=%d\u0026size=%d\", page, size))).retrieve()\r\n                    .body(JsonNode.class);\r\n        users = new JsonMapper().readerForListOf(UserEntity.class).readValue(node.get(\"content\"));\r\n        users.forEach(System.out::println);\r\n    }\r\n\r\n    @Then(\"the response should give me exactly {int} users\")\r\n    public void responseShouldReturnSomeNumberOfUsers(int userCount) {\r\n        assertEquals(userCount, users.size());\r\n    }\r\n\r\n    @Then(\"every user is different\")\r\n    public void everyUserIsDifferent() {\r\n        final Set\u003cLong\u003e userIds = users.stream().map(UserEntity::getId).collect(Collectors.toSet());\r\n        assertEquals(users.size(), userIds.size());\r\n    }\r\n\r\n\r\n\r\n    private String getUrl(String path) {\r\n        return \"http://localhost:\" + port + path;\r\n    }\r\n\r\n    private UserEntity createTestUser(int id) {\r\n\r\n        final UserEntity user = new UserEntity();\r\n        user.setName(RandomStringUtils.randomAlphabetic(20));\r\n        user.setUserType(\"NORMAL\");\r\n        user.setRegisterDatetime(new Timestamp(System.currentTimeMillis()));\r\n        user.setEmail(RandomStringUtils.randomAlphabetic(20) + \"@example.com\");\r\n\r\n        return user;\r\n    }\r\n}\n"])</script><script>self.__next_f.push([1,"11:T4ce,Feature: User features\r\n\r\n  Scenario Outline: Get All - \u003cuserCount\u003e users when there are \u003cuserCount\u003e users\r\n    Given \u003cuserCount\u003e users have registered\r\n    When I make a request to get all users\r\n    Then the response should give me exactly \u003cuserCount\u003e users\r\n    And every user is different\r\n\r\n    Examples:\r\n      | userCount |\r\n      |         0 |\r\n      |         1 |\r\n      |        10 |\r\n\r\n  Scenario Outline: Get All (Paged) - \u003cexpectedUserCount\u003e users when getting page \u003cpage\u003e with size of \u003csize\u003e when there are \u003cuserCount\u003e users\r\n    Given \u003cuserCount\u003e users have registered\r\n    When I make a request to get page \u003cpage\u003e of all users with page size of \u003csize\u003e\r\n    Then the response should give me exactly \u003cexpectedUserCount\u003e users\r\n    And every user is different\r\n\r\n    Examples:\r\n      | userCount | size | page | expectedUserCount |\r\n      |         0 |    0 |    0 |                 0 |\r\n      |         1 |    1 |    0 |                 1 |\r\n      |         5 |    3 |    0 |                 3 |\r\n      |         5 |    3 |    1 |                 2 |\r\n      |        50 |   23 |    0 |                23 |\r\n      |        50 |   23 |    1 |                23 |\r\n      |        50 |   23 |    2 |                 4 |\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"wfZ4FdS4ntgGvzjeKJhfw\",\"p\":\"/e2-next\",\"c\":[\"\",\"blog\",\"java-test-cucumber\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[\"(2024-02)\",{\"children\":[\"java-test-cucumber\",{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/e2-next/_next/static/css/d3df112486f97f47.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/e2-next/_next/static/css/c3624a693ae5a0c4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900\u0026display=swap\",\"rel\":\"stylesheet\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css\"}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"gap\":5,\"children\":[[\"$\",\"$L3\",null,{\"gap\":5,\"className\":\"text-center\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"code\",null,{\"className\":\"SiteHeader_name__cwQmL\",\"children\":\"Chung Cheuk Hang Michael\"}],[\"$\",\"code\",null,{\"className\":\"SiteHeader_title__CCfvI\",\"children\":\"Java Web Developer\"}]]}],[\"$\",\"$L4\",null,{}]]}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"hr\",null,{}],[\"$\",\"$L3\",null,{\"gap\":3,\"children\":[\"$\",\"$L7\",null,{\"className\":\"text-center\",\"children\":[\"$\",\"$L8\",null,{\"xs\":1,\"sm\":2,\"md\":3,\"className\":\"justify-content-center g-3\",\"children\":[[\"$\",\"$L9\",\"0\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"tel:+85263301333\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-solid fa-phone\",\"style\":{\"color\":\"#009688\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"6330 1333\",\" \"]}]]}]}]}],[\"$\",\"$L9\",\"1\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"mailto:michaelboyboy@gmail.com\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-solid fa-envelope\",\"style\":{\"color\":\"#f44336\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"michaelboyboy@gmail.com\",\" \"]}]]}]}]}],[\"$\",\"$L9\",\"2\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"https://www.linkedin.com/in/mickchung\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-brands fa-linkedin\",\"style\":{\"color\":\"#2196f3\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"www.linkedin.com/in/mickchung\",\" \"]}]]}]}]}]]}]}]}]]}]}]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"(2024-02)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"(2024-02)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"java-test-cucumber\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"(2024-02)\",\"children\",\"java-test-cucumber\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"h1\",null,{\"children\":\"6 Cucumber\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Cucumber 係一個專門做 behavior-driven development（BDD）testing 既 library，我地通常會喺用家既角度去測試我地既 Spring Boot 項目既 behaviors。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"有別於 JUnit、Mocktio 呢啲用黎測試 single layer 既 libraries，BDD testing 既目的係根據用家提供既 user stories（需求場景）去設計 test cases。寫 BDD test cases 既時候，我地會用 natural language（例如英文）去描述每一個 behavior。我地想用 BDD testing 測試既野可以係類似購物落單流程、會員註冊流程既呢啲牽涉多個 Java classes 或者 Spring components 既業務功能。除左複雜既業務流程或者功能，我地都可以用 Cucumber 黎寫 REST API test cases，甚至測試 front-end 功能既 Selenium web tests。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Cucumber BDD tests 既描述檔用既係 Gherkin syntax，簡單黎講就係 Given-When-Then 既流程次序，如果寫過 Mockito BDD tests 既話應該唔會對 Given-When-Then 陌生。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"以下係一個符合 BDD 既例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-plaintext\",\"children\":\"Feature: Keyword search with Google\\r\\n\\r\\n  Scenario: A Google text search\\r\\n    Given the web browser is displaying the Google Search home page\\r\\n    When I enter \\\"cucumber\\\" as the search keyword\\r\\n\\tAnd I click the Search button\\r\\n    Then search results for \\\"cucumber\\\" should be shown\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"6.1 Gherkin keywords\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"以下係一啲常用既 Gherkin keywords：\"}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"Keyword\"}],[\"$\",\"th\",null,{\"children\":\"用途\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Feature\"}]}],[\"$\",\"td\",null,{\"children\":[\"佢係每個 Cucumber \",[\"$\",\"code\",null,{\"children\":\".feature\"}],\" 檔案既第一句，描述呢個系統功能係大概關於啲乜野。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Scenario\"}],\"／\",[\"$\",\"code\",null,{\"children\":\"Example\"}]]}],[\"$\",\"td\",null,{\"children\":[\"佢係 under \",[\"$\",\"code\",null,{\"children\":\"Feature\"}],\" 下面唔同既 BDD 場景。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Scenario Outline\"}],\"／\",[\"$\",\"code\",null,{\"children\":\"Scenario Template\"}]]}],[\"$\",\"td\",null,{\"children\":[\"同 \",[\"$\",\"code\",null,{\"children\":\"Scenario\"}],\" 既 structure 基本上一樣，但佢係「parameterized」版本既 \",[\"$\",\"code\",null,{\"children\":\"Scenario\"}],\"，係實際會執行既 scenario 既 template，需要配合 \",[\"$\",\"code\",null,{\"children\":\"Examples\"}],\" 裡面唔同既 test parameters 黎多次執行自己。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Given\"}]}],[\"$\",\"td\",null,{\"children\":[\"佢係 under \",[\"$\",\"code\",null,{\"children\":\"Scenario\"}],\" 或者 \",[\"$\",\"code\",null,{\"children\":\"Scenario Outline\"}],\" 既語句，一般係用黎描述 test data setup。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"When\"}]}],[\"$\",\"td\",null,{\"children\":[\"佢係 under \",[\"$\",\"code\",null,{\"children\":\"Scenario\"}],\" 或者 \",[\"$\",\"code\",null,{\"children\":\"Scenario Outline\"}],\" 既語句，一般係用黎描述用家既行為。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Then\"}]}],[\"$\",\"td\",null,{\"children\":[\"佢係 under \",[\"$\",\"code\",null,{\"children\":\"Scenario\"}],\" 或者 \",[\"$\",\"code\",null,{\"children\":\"Scenario Outline\"}],\" 既語句，一般係用黎描述期望既結果。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"And\"}]}],[\"$\",\"td\",null,{\"children\":[\"佢係 under \",[\"$\",\"code\",null,{\"children\":\"Scenario\"}],\" 或者 \",[\"$\",\"code\",null,{\"children\":\"Scenario Outline\"}],\" 既語句，承接上一句既 keyword，例如 \",[\"$\",\"code\",null,{\"children\":\"When\"}],\" A \",[\"$\",\"code\",null,{\"children\":\"And\"}],\" B、\",[\"$\",\"code\",null,{\"children\":\"Given\"}],\" A \",[\"$\",\"code\",null,{\"children\":\"And\"}],\" B 以及 \",[\"$\",\"code\",null,{\"children\":\"Then\"}],\" A \",[\"$\",\"code\",null,{\"children\":\"And\"}],\" B。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Examples\"}],\"／\",[\"$\",\"code\",null,{\"children\":\"Scenarios\"}]]}],[\"$\",\"td\",null,{\"children\":[\"如果用 \",[\"$\",\"code\",null,{\"children\":\"Scenario Outline\"}],\" 實現 parameterized test，我地就需要提供 \",[\"$\",\"code\",null,{\"children\":\"Examples\"}],\" 黎作為每個實際 scenario 既 test parameters。\"]}]]}]]}]]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"6.2 Maven dependencies\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-xml\",\"children\":\"$f\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"註：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"我地既 BDD test 會用 H2 database，以免連線到真既 MySQL database。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"我地用左 \",[\"$\",\"code\",null,{\"children\":\"cucumber-bom\"}],\" 黎控制 Cucumber test dependencies 既版本號碼。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"我地需要用返 JUnit 4，所以要加 \",[\"$\",\"code\",null,{\"children\":\"junit-vintage-engine\"}],\" 既 test dependency。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"6.3 寫 Java code\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Project structure：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"src/main/java\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/code\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/controller\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"UserController.java\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/entity\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"UserEntity.java\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/repo\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"UserRepo.java\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/service\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"UserService.java\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"MainApplication.java\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"src/test/java\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/code\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/user\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"CucumberSpringConfig.java\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"UserSteps.java\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"UserTest.java\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"src/test/resources\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/features\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/user\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"basic.feature\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"UserController\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"UserEntity\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"UserRepo\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"UserService\"}],\" 都係一啲基本既 Spring components，呢度就唔特別寫出黎。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"下面寫既 Java classes 係 Cucumber 需要用到既。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"CucumberSpringConfig.java\"}],\"：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@CucumberContextConfiguration\\r\\n@SpringBootTest(\\r\\n    classes = MainApplication.class,\\r\\n    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\\r\\npublic class CucumberSpringConfig {\\r\\n\\r\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"UserTest.java\"}],\"：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@RunWith(Cucumber.class)\\r\\n@CucumberOptions(\\r\\n    features = {\\r\\n        \\\"src/test/resources/features\\\"\\r\\n    },\\r\\n    glue = \\\"code.user\\\"\\r\\n)\\r\\npublic class UserTest {\\r\\n\\r\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"UserSteps.java\"}],\"：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"$10\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"解釋：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"我地喺 \",[\"$\",\"code\",null,{\"children\":\"UserSteps\"}],\" 裡面寫既 \",[\"$\",\"code\",null,{\"children\":\"@Given\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"@When\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"@Then\"}],\" method annotations 既 \",[\"$\",\"code\",null,{\"children\":\"value\"}],\" 係對應返我地既 \",[\"$\",\"code\",null,{\"children\":\".feature\"}],\" 檔既 behavior 描述。\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"其實全部 methods annotate 曬做 \",[\"$\",\"code\",null,{\"children\":\"@Given\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"@When\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"@Then\"}],\" 既其中一種都可以，唔需要 exactly match \",[\"$\",\"code\",null,{\"children\":\".feature\"}],\" 檔裡面 scenario 既 keywords。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"@Given\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"@When\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"@Then\"}],\" 可以用 \",[\"$\",\"code\",null,{\"children\":\"{int}\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"{string}\"}],\" 之類既 placeholders 黎對應返 method arguments。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"我地可以用 instance fields 黎喺同一個 scenario 裡面既 Given-When-Then 之間 share data。\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"除非用到 Spring 既 annotations，否則一般既 instance fields 都會喺 scenario 開始既時候清除（\",[\"$\",\"code\",null,{\"children\":\"null\"}],\"），例如 \",[\"$\",\"code\",null,{\"children\":\"UserSteps\"}],\" 既 \",[\"$\",\"code\",null,{\"children\":\"List\u003cUserEntity\u003e users\"}],\"。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":[\"6.4 寫 Cucumber \",[\"$\",\"code\",null,{\"children\":\".feature\"}],\" 檔\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-plaintext\",\"children\":\"$11\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"6.5 測試\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"6.5.1 Eclipse 執行 JUnit test\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"當我地喺 Eclipse 度用 JUnit 4 執行 \",[\"$\",\"code\",null,{\"children\":\"UserTest\"}],\"，就會見到以下 JUnit view 既結果：\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2024-02/java-test-cucumber/Eclipse-JUnit-view.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"6.5.2 Maven CLI\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"我地執行 \",[\"$\",\"code\",null,{\"children\":\"mvn test\"}],\" 就會見到以下既結果：\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2024-02/java-test-cucumber/mvn-test-result.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"註：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Maven Surefire Plugin 有幾個默認既 test class naming patterns，如果我地既 test classes 唔 follow 呢啲 naming patterns，個 plugin 就會無視我地既 test classes。\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"其中一個默認既 naming pattern 係 test class name 要帶有 \",[\"$\",\"code\",null,{\"children\":\"Test\"}],\" 既 suffix，就好似我地既 \",[\"$\",\"code\",null,{\"children\":\"UserTest\"}],\" 咁。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"6.6 參考資料\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://automationpanda.com/2017/01/27/bdd-101-gherkin-by-example/\",\"children\":\"BDD 101: Gherkin By Example\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://cucumber.io/docs/gherkin/reference/\",\"children\":\"Cucumber 官方文檔 - Gherkin Reference\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://cucumber.io/docs/cucumber/step-definitions/?lang=java\",\"children\":\"Cucumber 官方文檔 - Step Definitions\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html\",\"children\":\"Maven 官方文檔 - Inclusions and Exclusions of Tests\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html#configuring-junit-platform\",\"children\":\"Maven 官方文檔 - Using JUnit 5 Platform - Configuring JUnit Platform\"}]}],\"\\n\"]}]],null,[\"$\",\"$L12\",null,{\"children\":\"$L13\"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"QE1RZOBigE3U1RV23MCAH\",{\"children\":[[\"$\",\"$L14\",null,{\"children\":\"$L15\"}],[\"$\",\"$L16\",null,{\"children\":\"$L17\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$18\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"17:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n15:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Michael Chung's e-Portfolio\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Powered by Next.js and React\"}]]\n"])</script><script>self.__next_f.push([1,"13:null\n"])</script></body></html>