<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="blog/2023-06/picocli/OptionsAndParameters.png"/><link rel="stylesheet" href="/e2-next/_next/static/css/d3df112486f97f47.css" data-precedence="next"/><link rel="stylesheet" href="/e2-next/_next/static/css/c3624a693ae5a0c4.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/e2-next/_next/static/chunks/webpack-f088da4552bcc253.js"/><script src="/e2-next/_next/static/chunks/4bd1b696-120f4d9c40d223dd.js" async=""></script><script src="/e2-next/_next/static/chunks/1517-c8d232d43a11224c.js" async=""></script><script src="/e2-next/_next/static/chunks/main-app-05c45cc8f30d6cea.js" async=""></script><script src="/e2-next/_next/static/chunks/7829-b7b9eb1dbe0d40e4.js" async=""></script><script src="/e2-next/_next/static/chunks/2153-45fd9844831c6348.js" async=""></script><script src="/e2-next/_next/static/chunks/app/layout-ea91c2d128ec48c2.js" async=""></script><script src="/e2-next/_next/static/chunks/app/page-c8b940db14fac9a0.js" async=""></script><title>Michael Chung&#x27;s e-Portfolio</title><meta name="description" content="Powered by Next.js and React"/><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/><script src="/e2-next/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="vstack gap-5"><div class="text-center vstack gap-5"><div><code class="SiteHeader_name__cwQmL">Chung Cheuk Hang Michael</code><code class="SiteHeader_title__CCfvI">Java Web Developer</code></div><nav class="justify-content-center navbar navbar-expand-md navbar-dark"><button type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="justify-content-center navbar-collapse collapse"><div class="justify-content-center navbar-nav nav-underline"><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/" class="nav-link" href="/e2-next">Home</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/work" class="nav-link" href="/e2-next/work">Work</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/hobbyProjects" class="nav-link" href="/e2-next/hobbyProjects">Hobby projects</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/personality" class="nav-link" href="/e2-next/personality">Personality</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/blog" class="nav-link" href="/e2-next/blog">Blog</a></div></div></div></nav></div><h1>1 Picocli 用途</h1>
<p>有時我地會想用寫一個冇 GUI 介面既 CLI 程式去重覆處理一啲野。舉個例，我地想批量處理圖片，為每張圖片加上類似美圖 apps 既濾鏡效果，而為左方便我地比較邊張既效果出到黎會好啲，我地要處理同一批圖片好幾次，每次都要用唔同既參數、配置。當然我地寫個 Java 程式，<code>main</code> method 裡面寫好曬會針對同一批圖片用上濾鏡一、濾鏡二、濾鏡三等等既處理，每次都開個 IDE 出黎直接改 code 裡面既參數，然後喺 IDE 度執行個程式。不過，假如呢個程式係要畀其他人用，咁就應該要整到似返個 CLI 既工具咁，可以以統一既操作方式，根據當刻用家提供既唔同參數而執行邏輯。仲有，通常 CLI 工具都會自帶內置既 user manual，話畀用家知道有咩參數可以用。</p>
<p>Picocli 正正係一個可以畀我地非常方便咁開發 Java CLI 工具既 Maven library。佢提供左唔少 annotations 畀我地定義 CLI 既 options、parameters、subcommand 等等，然後佢會幫我地喺 console output 度 print help（類似 man page 既 user manual）。</p>
<hr/>
<h1>2 CLI 基礎知識</h1>
<h2>2.1 Options、positional parameters</h2>
<p>一般黎講，CLI 既參數有兩種：</p>
<table><thead><tr><th style="text-align:center">類別</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">Option</td><td>Key value pairs 或者 boolean（開／關）。</td></tr><tr><td style="text-align:center">Positional parameter</td><td>需要順次序提供既參數。</td></tr></tbody></table>
<p><img src="blog/2023-06/picocli/OptionsAndParameters.png" alt=""/></p>
<hr/>
<h2>2.2 Options、positional parameters 既次序</h2>
<p>我地只需要注意 positional parameters 既次序。</p>
<p>至於 options，一般都會將佢地擺先過 positional parameters，例如 <code>kubectl exec -i -t --container=mycontainer mypod</code>，呢度 <code>exec</code> 係 subcommand，後面以 <code>-</code> 或者 <code>--</code> 開頭既都係 options，而最後既 <code>mypod</code> 係唯一既 positional parameters。</p>
<p>不過，我地亦可以將 options 擺喺成句 command 既最後，例如 <code>kubectl logs -f mypod --tail=20</code>，呢度我地就將 <code>--tail</code> option 放在喺 positional parameter <code>mypod</code> 既後面。</p>
<hr/>
<h2>2.3 Double-dash</h2>
<p>Double-dash（<code>--</code>）係用黎分隔 options 以及 positional parameters。</p>
<p>舉個例，如果個 positional parameter 以 <code>-</code> 開頭，就有可能被誤以為係一個 option，咁我地可以喺第一個 positional parameter 既前面加上 <code>--</code>。</p>
<hr/>
<h2>2.4 Subcommand</h2>
<p>舉個 subcommand 既例子：</p>
<pre><code class="language-bash">kubectl get pods -n my-namespace
</code></pre>
<p>以上既 <code>get</code>、<code>pods</code> 就係 subcommand 以及 sub-subcommand 既例子。</p>
<hr/>
<h1>3 Maven dependencies</h1>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;info.picocli&lt;/groupId&gt;
    &lt;artifactId&gt;picocli&lt;/artifactId&gt;
    &lt;version&gt;4.7.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<hr/>
<h1>4 基本例子</h1>
<p>以下會展示最基本既例子。</p>
<p><code>MainCli.java</code>：</p>
<pre><code class="language-java">public class MainCli {

    public static void main(String[] args) {

        final CommandLine cli = new CommandLine(new MyCommand());
        final int exitCode = cli.execute(args);

        System.exit(exitCode);
    }
}
</code></pre>
<p><code>MyCommand.java</code>：</p>
<pre><code class="language-java">@Command(
    name = &quot;my-cli-app&quot;,
    description = &quot;This app is a CLI tool for testing Picocli.&quot;,
    sortOptions = false,
    showDefaultValues = true,
    mixinStandardHelpOptions = true,
    showEndOfOptionsDelimiterInUsageHelp = true,
    versionProvider = MyVersionProvider.class,
)
public class MyCommand implements Runnable {

    @Option(/* name, description, required, defaultValue, etc */)
    String sampleOption;

    @Parameters(/* index, description, arity, etc */)
    String sampleParameter;

    @Override
    public void run() {
        // log.info(...);
    }
}
</code></pre>
<p>註：</p>
<ul>
<li><code>MyCommand</code> 係一個終點 command，所以需要 implements <code>Runnable</code>。</li>
<li>如果執行既時候畀左 <code>--help</code> option，佢就會自動生成類似 man page 既結果。</li>
<li>如果執行既時候畀左 <code>--version</code> option 而又冇畀 <code>--help</code> option，佢就會用我地自定義既 <code>MyVersionProvider</code> class 黎生成結果。</li>
<li>又齊曬 required 既 options 以及 positional parameters，咁佢就會 call 個 <code>run()</code> method。</li>
</ul>
<hr/>
<h1>5 探討 Picocli annotations</h1>
<p>Picocli 既 <code>@Command</code>、<code>@Option</code>、<code>@Parameters</code> annotations 都有一個 <code>description</code> attribute，可以畀我地喺 <code>--help</code> 度詳述佢地既用途。</p>
<p>以下我地會透過重現 kubectl CLI 黎學習 Picocli。</p>
<h2>5.1 <code>@Command</code></h2>
<h3>5.1.1 Top-level command</h3>
<pre><code class="language-java">@Command(
    name = &quot;kubectl&quot;,
    description = &quot;This is a Picocli demo to replicate the &#x27;kubectl&#x27; CLI.&quot;,
    scope = ScopeType.INHERIT,
    sortOptions = false,
    showDefaultValues = true,
    mixinStandardHelpOptions = true,
    showEndOfOptionsDelimiterInUsageHelp = true,
    versionProvider = MyVersionProvider.class,
    subcommands = {
        KubectlGetCommand.class,
        KubectlDeleteCommand.class,
        KubectlLogsCommand.class,
    }
)
public class KubectlCommand {
    // 唔計 --help、--version 呢啲特殊既 predefined options，
    // 呢個本身唔係一個終點 command，所以唔洗 implements Runnable。
}
</code></pre>
<p>Class definition：</p>
<ul>
<li>如果唔係一個終點 command（執行既時候一定要提供 subcommand），就唔洗 implements <code>Runnable</code>，因為就算定義左 <code>run()</code> method，佢都唔會 call。</li>
<li>相反，如果係一個終點 command，就要 implements <code>Runnable</code>，因為佢會 call 我地定義既 <code>run()</code> method。</li>
</ul>
<p>一啲重要既 attributes：</p>
<table><thead><tr><th>Attribute</th><th>Value</th><th>解釋</th></tr></thead><tbody><tr><td><code>name</code></td><td>冇所謂</td><td>Top-level command 既 <code>name</code> attribute 冇用，因為我地執行既係個 CLI 既檔案名。</td></tr><tr><td><code>description</code></td><td>冇所謂</td><td>純粹 <code>--help</code> 顯示用。</td></tr><tr><td><code>scope</code></td><td><code>INHERIT</code></td><td>Subcommands 會 inherit 呢個 @Command annotation 既 attributes。</td></tr><tr><td><code>sortOptions</code></td><td><code>false</code></td><td>令 <code>--help</code> 裡面既 options 以 Java class 裡面啲 fields 既 declaration order 黎排序（默認係以英文字母排序）。</td></tr><tr><td><code>showDefaultValues</code></td><td><code>true</code></td><td>令 <code>--help</code> 裡面顯示默認值。</td></tr><tr><td><code>mixinStandardHelpOptions</code></td><td><code>true</code></td><td>加入 <code>--help</code>／<code>-h</code>、<code>--version</code>／<code>-V</code> 既 predefined options。</td></tr><tr><td><code>showEndOfOptionsDelimiterInUsageHelp</code></td><td><code>true</code></td><td>令 <code>--help</code> 裡面顯示 <code>--</code> 既用途。</td></tr><tr><td><code>versionProvider</code></td><td>自定義 class</td><td>用自定義既 class 黎生成 <code>--version</code> 既結果。</td></tr><tr><td><code>subcommands</code></td><td>自定義 classes</td><td>Subcommand 既自定義 classes。如果係終點 command，就要 implements <code>Runnable</code>。</td></tr></tbody></table>
<hr/>
<h3>5.1.2 Subcommand</h3>
<p>以下係一啲非終點 subcommand 既例子：</p>
<pre><code class="language-java">@Command(
    name = &quot;get&quot;,
    description = &quot;This is the &#x27;kubectl get&#x27; subcommand.&quot;,
    subcommands = {
        KubectlGetPodsCommand.class,
        KubectlGetDeploymentsCommand.class,
    }
)
public class KubectlGetCommand {}
</code></pre>
<pre><code class="language-java">@Command(
    name = &quot;delete&quot;,
    description = &quot;This is the &#x27;kubectl delete&#x27; command.&quot;,
    subcommands = {
        KubectlDeletePodsCommand.class,
        KubectlDeleteDeploymentsCommand.class,
    }
)
public class KubectlDeleteCommand {}
</code></pre>
<p>以下係一個終點 subcommand 既例子：</p>
<pre><code class="language-java">@Slf4j
@Command(
    name = &quot;logs&quot;,
    description = &quot;This is the &#x27;kubectl logs&#x27; command.&quot;
)
public class KubectlLogsCommand implements Runnable {

    @Option(names = { &quot;-f&quot;, &quot;--follow&quot; }, required = false, defaultValue = &quot;false&quot;)
    boolean follow;

    @Option(names = { &quot;--tail&quot; }, required = false, defaultValue = &quot;-1&quot;)
    int tail;

    @Parameters(index = &quot;0&quot;)
    String podName;

    @Override
    public void run() {
        log.info(&quot;kubectl logs&quot;);
        log.info(&quot;-f: {}&quot;, follow);
        log.info(&quot;--tail: {}&quot;, tail);
        log.info(&quot;Param 0: {}&quot;, podName);
    }
}
</code></pre>
<p>Command 例子：</p>
<pre><code class="language-bash">java -jar kubectl.jar logs mypod
java -jar kubectl.jar logs -f --tail=20 mypod
</code></pre>
<hr/>
<h3>5.1.3 Sub-subcommand</h3>
<p>以下都係終點 commands 既例子：</p>
<pre><code class="language-java">@Command(
    name = &quot;pods&quot;,
    aliases = { &quot;po&quot;, &quot;pod&quot; },
    description = &quot;This is the &#x27;kubectl get pods&#x27; command.&quot;
)
public class KubectlGetPodsCommand implements Runnable {

    @Override
    public void run() {
        System.out.println(&quot;kubectl get pods&quot;);
    }
}
</code></pre>
<p>Command 例子：</p>
<pre><code class="language-bash">java -jar kubectl.jar get po
java -jar kubectl.jar get pod
java -jar kubectl.jar get pods
</code></pre>
<pre><code class="language-java">@Slf4j
@Command(
    name = &quot;pods&quot;,
    aliases = { &quot;po&quot;, &quot;pod&quot; },
    description = &quot;This is the &#x27;kubectl delete pods&#x27; command.&quot;
)
public class KubectlDeletePodsCommand implements Runnable {

    @Parameters(
        index = &quot;0&quot;,
        description = &quot;A list of pod names.&quot;,
        arity = &quot;1..*&quot;
    )
    List&lt;String&gt; podNames;

    @Override
    public void run() {
        log.info(&quot;kubectl delete pods&quot;);
        log.info(&quot;Param 0: ({} elements) {}&quot;, podNames.size(), podNames);
    }
}
</code></pre>
<p>Command 例子：</p>
<pre><code class="language-bash">java -jar kubectl.jar delete po pod1
java -jar kubectl.jar delete pod pod1
java -jar kubectl.jar delete pods pod1
java -jar kubectl.jar delete pods pod1 pod2
</code></pre>
<hr/>
<h2>5.2 <code>@Option</code>（option）</h2>
<h3>5.2.1 必要 option</h3>
<pre><code class="language-java">@Option(
    names = { &quot;-i&quot;, &quot;--input&quot; },
    required = true
)
String input;
</code></pre>
<hr/>
<h3>5.2.2 非必要 option</h3>
<pre><code class="language-java">@Option(
    names = { &quot;-o&quot;, &quot;--output&quot; },
    required = false
)
String output;
</code></pre>
<hr/>
<h2>5.3 <code>@Parameters</code>（positional parameter）</h2>
<p>例子:</p>
<pre><code class="language-java">@Parameters(
    index = &quot;0&quot;,
    description = &quot;1st parameter&quot;
)
String foo;
</code></pre>
<pre><code class="language-java">@Parameters(
    index = &quot;1&quot;,
    description = &quot;2nd parameter&quot;
)
String bar;
</code></pre>
<pre><code class="language-java">@Parameters(
    index = &quot;2&quot;,
    description = &quot;3rd parameter (multiple values)&quot;,
    arity = &quot;1..*&quot;
)
List&lt;String&gt; varargs;
</code></pre>
<h3>5.3.1 非必要 positional parameter</h3>
<p>我地可以設置 <code>arity</code> 做 <code>0..1</code>，咁個 positional parameter 就可有可無。</p>
<pre><code class="language-java">@Parameter(index = &quot;0&quot;, arity = &quot;0..1&quot;)
String foo;
</code></pre>
<hr/>
<h1>6 Data types</h1>
<h2>6.1 <code>String</code></h2>
<pre><code class="language-java">@Option(
    names = { &quot;--foo&quot; },
    defaultValue = &quot;foo&quot; // 任意值
)
String foo;
</code></pre>
<hr/>
<h2>6.2 <code>boolean</code></h2>
<pre><code class="language-java">@Option(
    names = { &quot;--foo&quot; },
    defaultValue = &quot;true&quot; // &quot;true&quot;、&quot;false&quot;
)
boolean foo;
</code></pre>
<hr/>
<h2>6.3 <code>List&lt;String&gt;</code></h2>
<p>Option、positional parameter 都可以做到 multiple values，用起上黎都係差唔多，默認係用空格分隔開多個值。</p>
<p>不過要注意既係，就算用左 array 或者 <code>Collection</code> types（例如 <code>List</code>、<code>Set</code>），我地都要額外設置 <code>arity</code> 做 <code>0..*</code>、<code>1..*</code> 之類（即係值既數量既上下限），去覆蓋佢對 multi-valued types 既 <code>arity</code> 默認值 <code>1</code>。</p>
<p>除此之外，喺以下既情況下，我地需要設置 <code>split</code> 去話畀佢知我地會用咩符號黎分隔多個值：</p>
<ul>
<li>想用空格以外既符號去分隔多個值，例如 <code>,</code>、<code>;</code>。</li>
<li>喺 <code>defaultValue</code> 度提供多個值（如果冇設置 <code>split</code> 既話會當左做一個帶空格既值）。</li>
</ul>
<p>註：</p>
<ul>
<li>如果有幾個 options 都係接受多個值，例如 <code>--foo 1 2 3 --bar 4 5 6</code>，佢會識得分個值係咪其中一個 option 黎，如果係（例子裡面既 <code>--bar</code>），佢會識得分返開佢地，而唔係當左佢係前面 option（例子裡面既 <code>--foo</code>）既其中一個值。<!-- -->
<ul>
<li>即使唔係 <code>-</code> 或者 <code>--</code> 開頭佢都會識分。</li>
</ul>
</li>
<li>如果有幾個 positional parameters 都接受多個值既話，測試過係會出問題，即使前面既已經設置左 <code>arity</code> 數量上限。</li>
</ul>
<pre><code class="language-java">@Option(
    names = { &quot;--foo&quot; },
    defaultValue = &quot;item1 item2 item3&quot;,
    split = &quot; &quot;
)
List&lt;String&gt; foo;
</code></pre>
<p>Command 例子：</p>
<pre><code class="language-bash">--foo item1
--foo item1 item2
</code></pre>
<p>以下既例子用 <code>,</code> 去分隔多個值：</p>
<pre><code class="language-java">@Option(
    names = { &quot;--foo&quot; },
    defaultValue = &quot;item1,item2,item3&quot;, // 要冇 space
    split = &quot;,&quot;
)
List&lt;String&gt; foo;
</code></pre>
<p>Command 例子：</p>
<pre><code class="language-bash">--foo item1
--foo item1,item2
</code></pre>
<hr/>
<h2>6.4 <code>enum</code></h2>
<pre><code class="language-java">public static enum MyEnum {
    FOO, BAR
}

@Option(
    names = { &quot;--foo&quot; },
    defaultValue = &quot;BAR&quot; // 個 enum 既其中一個 constant
)
MyEnum foo;
</code></pre>
<hr/>
<h1>7 參考資料</h1>
<ul>
<li><a href="https://picocli.info/quick-guide.html">Picocli 官方文檔 - Quick Guide</a></li>
<li><a href="https://picocli.info/#_options_and_parameters">Picocli 官方文檔 - 4. Options and Parameters</a></li>
<li><a href="https://picocli.info/#_multiple_values">Picocli 官方文檔 - 6. Multiple Values</a></li>
<li><a href="https://picocli.info/#_default_arity">Picocli 官方文檔 - 6.5 Default Arity</a></li>
</ul><hr/><div class="vstack gap-3"><div class="text-center container"><div class="justify-content-center g-3 row row-cols-md-3 row-cols-sm-2 row-cols-1"><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="tel:+85263301333"><div class="card-body"><div class="card-title h5"><i class="fa-solid fa-phone" style="color:#009688"></i></div><p class="text-muted card-text">6330 1333<!-- --> </p></div></a></div><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="mailto:michaelboyboy@gmail.com"><div class="card-body"><div class="card-title h5"><i class="fa-solid fa-envelope" style="color:#f44336"></i></div><p class="text-muted card-text">michaelboyboy@gmail.com<!-- --> </p></div></a></div><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="https://www.linkedin.com/in/mickchung"><div class="card-body"><div class="card-title h5"><i class="fa-brands fa-linkedin" style="color:#2196f3"></i></div><p class="text-muted card-text">www.linkedin.com/in/mickchung<!-- --> </p></div></a></div></div></div></div></div><script src="/e2-next/_next/static/chunks/webpack-f088da4552bcc253.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[8287,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n3:I[3339,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n4:I[1367,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n5:I[5244,[],\"\"]\n6:I[3866,[],\"\"]\n7:I[4798,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n8:I[6121,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n9:I[3667,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\na:I[8407,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nb:I[8173,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"\"]\nc:I[3197,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nd:I[7933,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\ne:I[3800,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nf:I[6213,[],\"OutletBoundary\"]\n11:I[6213,[],\"MetadataBoundary\"]\n13:I[6213,[],\"ViewportBoundary\"]\n15:I[4835,[],\"\"]\n:HL[\"/e2-next/_next/static/css/d3df112486f97f47.css\",\"style\"]\n:HL[\"/e2-next/_next/static/css/c3624a693ae5a0c4.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"wfZ4FdS4ntgGvzjeKJhfw\",\"p\":\"/e2-next\",\"c\":[\"\",\"blog\",\"picocli\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[\"(2023-06)\",{\"children\":[\"picocli\",{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/e2-next/_next/static/css/d3df112486f97f47.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/e2-next/_next/static/css/c3624a693ae5a0c4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900\u0026display=swap\",\"rel\":\"stylesheet\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css\"}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"gap\":5,\"children\":[[\"$\",\"$L3\",null,{\"gap\":5,\"className\":\"text-center\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"code\",null,{\"className\":\"SiteHeader_name__cwQmL\",\"children\":\"Chung Cheuk Hang Michael\"}],[\"$\",\"code\",null,{\"className\":\"SiteHeader_title__CCfvI\",\"children\":\"Java Web Developer\"}]]}],[\"$\",\"$L4\",null,{}]]}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"hr\",null,{}],[\"$\",\"$L3\",null,{\"gap\":3,\"children\":[\"$\",\"$L7\",null,{\"className\":\"text-center\",\"children\":[\"$\",\"$L8\",null,{\"xs\":1,\"sm\":2,\"md\":3,\"className\":\"justify-content-center g-3\",\"children\":[[\"$\",\"$L9\",\"0\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"tel:+85263301333\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-solid fa-phone\",\"style\":{\"color\":\"#009688\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"6330 1333\",\" \"]}]]}]}]}],[\"$\",\"$L9\",\"1\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"mailto:michaelboyboy@gmail.com\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-solid fa-envelope\",\"style\":{\"color\":\"#f44336\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"michaelboyboy@gmail.com\",\" \"]}]]}]}]}],[\"$\",\"$L9\",\"2\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"https://www.linkedin.com/in/mickchung\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-brands fa-linkedin\",\"style\":{\"color\":\"#2196f3\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"www.linkedin.com/in/mickchung\",\" \"]}]]}]}]}]]}]}]}]]}]}]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"(2023-06)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"(2023-06)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"picocli\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"(2023-06)\",\"children\",\"picocli\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"h1\",null,{\"children\":\"1 Picocli 用途\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"有時我地會想用寫一個冇 GUI 介面既 CLI 程式去重覆處理一啲野。舉個例，我地想批量處理圖片，為每張圖片加上類似美圖 apps 既濾鏡效果，而為左方便我地比較邊張既效果出到黎會好啲，我地要處理同一批圖片好幾次，每次都要用唔同既參數、配置。當然我地寫個 Java 程式，\",[\"$\",\"code\",null,{\"children\":\"main\"}],\" method 裡面寫好曬會針對同一批圖片用上濾鏡一、濾鏡二、濾鏡三等等既處理，每次都開個 IDE 出黎直接改 code 裡面既參數，然後喺 IDE 度執行個程式。不過，假如呢個程式係要畀其他人用，咁就應該要整到似返個 CLI 既工具咁，可以以統一既操作方式，根據當刻用家提供既唔同參數而執行邏輯。仲有，通常 CLI 工具都會自帶內置既 user manual，話畀用家知道有咩參數可以用。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Picocli 正正係一個可以畀我地非常方便咁開發 Java CLI 工具既 Maven library。佢提供左唔少 annotations 畀我地定義 CLI 既 options、parameters、subcommand 等等，然後佢會幫我地喺 console output 度 print help（類似 man page 既 user manual）。\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"2 CLI 基礎知識\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"2.1 Options、positional parameters\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"一般黎講，CLI 既參數有兩種：\"}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"center\"},\"children\":\"類別\"}],[\"$\",\"th\",null,{\"children\":\"描述\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"center\"},\"children\":\"Option\"}],[\"$\",\"td\",null,{\"children\":\"Key value pairs 或者 boolean（開／關）。\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"center\"},\"children\":\"Positional parameter\"}],[\"$\",\"td\",null,{\"children\":\"需要順次序提供既參數。\"}]]}]]}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2023-06/picocli/OptionsAndParameters.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"2.2 Options、positional parameters 既次序\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"我地只需要注意 positional parameters 既次序。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"至於 options，一般都會將佢地擺先過 positional parameters，例如 \",[\"$\",\"code\",null,{\"children\":\"kubectl exec -i -t --container=mycontainer mypod\"}],\"，呢度 \",[\"$\",\"code\",null,{\"children\":\"exec\"}],\" 係 subcommand，後面以 \",[\"$\",\"code\",null,{\"children\":\"-\"}],\" 或者 \",[\"$\",\"code\",null,{\"children\":\"--\"}],\" 開頭既都係 options，而最後既 \",[\"$\",\"code\",null,{\"children\":\"mypod\"}],\" 係唯一既 positional parameters。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"不過，我地亦可以將 options 擺喺成句 command 既最後，例如 \",[\"$\",\"code\",null,{\"children\":\"kubectl logs -f mypod --tail=20\"}],\"，呢度我地就將 \",[\"$\",\"code\",null,{\"children\":\"--tail\"}],\" option 放在喺 positional parameter \",[\"$\",\"code\",null,{\"children\":\"mypod\"}],\" 既後面。\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"2.3 Double-dash\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Double-dash（\",[\"$\",\"code\",null,{\"children\":\"--\"}],\"）係用黎分隔 options 以及 positional parameters。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"舉個例，如果個 positional parameter 以 \",[\"$\",\"code\",null,{\"children\":\"-\"}],\" 開頭，就有可能被誤以為係一個 option，咁我地可以喺第一個 positional parameter 既前面加上 \",[\"$\",\"code\",null,{\"children\":\"--\"}],\"。\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"2.4 Subcommand\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"舉個 subcommand 既例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"kubectl get pods -n my-namespace\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"以上既 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"pods\"}],\" 就係 subcommand 以及 sub-subcommand 既例子。\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"3 Maven dependencies\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-xml\",\"children\":\"\u003cdependency\u003e\\r\\n    \u003cgroupId\u003einfo.picocli\u003c/groupId\u003e\\r\\n    \u003cartifactId\u003epicocli\u003c/artifactId\u003e\\r\\n    \u003cversion\u003e4.7.3\u003c/version\u003e\\r\\n\u003c/dependency\u003e\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"4 基本例子\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"以下會展示最基本既例子。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"MainCli.java\"}],\"：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"public class MainCli {\\r\\n\\r\\n    public static void main(String[] args) {\\r\\n\\r\\n        final CommandLine cli = new CommandLine(new MyCommand());\\r\\n        final int exitCode = cli.execute(args);\\r\\n\\r\\n        System.exit(exitCode);\\r\\n    }\\r\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"MyCommand.java\"}],\"：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Command(\\r\\n    name = \\\"my-cli-app\\\",\\r\\n    description = \\\"This app is a CLI tool for testing Picocli.\\\",\\r\\n    sortOptions = false,\\r\\n    showDefaultValues = true,\\r\\n    mixinStandardHelpOptions = true,\\r\\n    showEndOfOptionsDelimiterInUsageHelp = true,\\r\\n    versionProvider = MyVersionProvider.class,\\r\\n)\\r\\npublic class MyCommand implements Runnable {\\r\\n\\r\\n    @Option(/* name, description, required, defaultValue, etc */)\\r\\n    String sampleOption;\\r\\n\\r\\n    @Parameters(/* index, description, arity, etc */)\\r\\n    String sampleParameter;\\r\\n\\r\\n    @Override\\r\\n    public void run() {\\r\\n        // log.info(...);\\r\\n    }\\r\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"註：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"MyCommand\"}],\" 係一個終點 command，所以需要 implements \",[\"$\",\"code\",null,{\"children\":\"Runnable\"}],\"。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"如果執行既時候畀左 \",[\"$\",\"code\",null,{\"children\":\"--help\"}],\" option，佢就會自動生成類似 man page 既結果。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"如果執行既時候畀左 \",[\"$\",\"code\",null,{\"children\":\"--version\"}],\" option 而又冇畀 \",[\"$\",\"code\",null,{\"children\":\"--help\"}],\" option，佢就會用我地自定義既 \",[\"$\",\"code\",null,{\"children\":\"MyVersionProvider\"}],\" class 黎生成結果。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"又齊曬 required 既 options 以及 positional parameters，咁佢就會 call 個 \",[\"$\",\"code\",null,{\"children\":\"run()\"}],\" method。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"5 探討 Picocli annotations\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Picocli 既 \",[\"$\",\"code\",null,{\"children\":\"@Command\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"@Option\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"@Parameters\"}],\" annotations 都有一個 \",[\"$\",\"code\",null,{\"children\":\"description\"}],\" attribute，可以畀我地喺 \",[\"$\",\"code\",null,{\"children\":\"--help\"}],\" 度詳述佢地既用途。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"以下我地會透過重現 kubectl CLI 黎學習 Picocli。\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":[\"5.1 \",[\"$\",\"code\",null,{\"children\":\"@Command\"}]]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"5.1.1 Top-level command\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Command(\\r\\n    name = \\\"kubectl\\\",\\r\\n    description = \\\"This is a Picocli demo to replicate the 'kubectl' CLI.\\\",\\r\\n    scope = ScopeType.INHERIT,\\r\\n    sortOptions = false,\\r\\n    showDefaultValues = true,\\r\\n    mixinStandardHelpOptions = true,\\r\\n    showEndOfOptionsDelimiterInUsageHelp = true,\\r\\n    versionProvider = MyVersionProvider.class,\\r\\n    subcommands = {\\r\\n        KubectlGetCommand.class,\\r\\n        KubectlDeleteCommand.class,\\r\\n        KubectlLogsCommand.class,\\r\\n    }\\r\\n)\\r\\npublic class KubectlCommand {\\r\\n    // 唔計 --help、--version 呢啲特殊既 predefined options，\\r\\n    // 呢個本身唔係一個終點 command，所以唔洗 implements Runnable。\\r\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Class definition：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"如果唔係一個終點 command（執行既時候一定要提供 subcommand），就唔洗 implements \",[\"$\",\"code\",null,{\"children\":\"Runnable\"}],\"，因為就算定義左 \",[\"$\",\"code\",null,{\"children\":\"run()\"}],\" method，佢都唔會 call。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"相反，如果係一個終點 command，就要 implements \",[\"$\",\"code\",null,{\"children\":\"Runnable\"}],\"，因為佢會 call 我地定義既 \",[\"$\",\"code\",null,{\"children\":\"run()\"}],\" method。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"一啲重要既 attributes：\"}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"Attribute\"}],[\"$\",\"th\",null,{\"children\":\"Value\"}],[\"$\",\"th\",null,{\"children\":\"解釋\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"name\"}]}],[\"$\",\"td\",null,{\"children\":\"冇所謂\"}],[\"$\",\"td\",null,{\"children\":[\"Top-level command 既 \",[\"$\",\"code\",null,{\"children\":\"name\"}],\" attribute 冇用，因為我地執行既係個 CLI 既檔案名。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"description\"}]}],[\"$\",\"td\",null,{\"children\":\"冇所謂\"}],[\"$\",\"td\",null,{\"children\":[\"純粹 \",[\"$\",\"code\",null,{\"children\":\"--help\"}],\" 顯示用。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"scope\"}]}],[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"INHERIT\"}]}],[\"$\",\"td\",null,{\"children\":\"Subcommands 會 inherit 呢個 @Command annotation 既 attributes。\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"sortOptions\"}]}],[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"false\"}]}],[\"$\",\"td\",null,{\"children\":[\"令 \",[\"$\",\"code\",null,{\"children\":\"--help\"}],\" 裡面既 options 以 Java class 裡面啲 fields 既 declaration order 黎排序（默認係以英文字母排序）。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"showDefaultValues\"}]}],[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"true\"}]}],[\"$\",\"td\",null,{\"children\":[\"令 \",[\"$\",\"code\",null,{\"children\":\"--help\"}],\" 裡面顯示默認值。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"mixinStandardHelpOptions\"}]}],[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"true\"}]}],[\"$\",\"td\",null,{\"children\":[\"加入 \",[\"$\",\"code\",null,{\"children\":\"--help\"}],\"／\",[\"$\",\"code\",null,{\"children\":\"-h\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"--version\"}],\"／\",[\"$\",\"code\",null,{\"children\":\"-V\"}],\" 既 predefined options。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"showEndOfOptionsDelimiterInUsageHelp\"}]}],[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"true\"}]}],[\"$\",\"td\",null,{\"children\":[\"令 \",[\"$\",\"code\",null,{\"children\":\"--help\"}],\" 裡面顯示 \",[\"$\",\"code\",null,{\"children\":\"--\"}],\" 既用途。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"versionProvider\"}]}],[\"$\",\"td\",null,{\"children\":\"自定義 class\"}],[\"$\",\"td\",null,{\"children\":[\"用自定義既 class 黎生成 \",[\"$\",\"code\",null,{\"children\":\"--version\"}],\" 既結果。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"subcommands\"}]}],[\"$\",\"td\",null,{\"children\":\"自定義 classes\"}],[\"$\",\"td\",null,{\"children\":[\"Subcommand 既自定義 classes。如果係終點 command，就要 implements \",[\"$\",\"code\",null,{\"children\":\"Runnable\"}],\"。\"]}]]}]]}]]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"5.1.2 Subcommand\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"以下係一啲非終點 subcommand 既例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Command(\\r\\n    name = \\\"get\\\",\\r\\n    description = \\\"This is the 'kubectl get' subcommand.\\\",\\r\\n    subcommands = {\\r\\n        KubectlGetPodsCommand.class,\\r\\n        KubectlGetDeploymentsCommand.class,\\r\\n    }\\r\\n)\\r\\npublic class KubectlGetCommand {}\\n\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Command(\\r\\n    name = \\\"delete\\\",\\r\\n    description = \\\"This is the 'kubectl delete' command.\\\",\\r\\n    subcommands = {\\r\\n        KubectlDeletePodsCommand.class,\\r\\n        KubectlDeleteDeploymentsCommand.class,\\r\\n    }\\r\\n)\\r\\npublic class KubectlDeleteCommand {}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"以下係一個終點 subcommand 既例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Slf4j\\r\\n@Command(\\r\\n    name = \\\"logs\\\",\\r\\n    description = \\\"This is the 'kubectl logs' command.\\\"\\r\\n)\\r\\npublic class KubectlLogsCommand implements Runnable {\\r\\n\\r\\n    @Option(names = { \\\"-f\\\", \\\"--follow\\\" }, required = false, defaultValue = \\\"false\\\")\\r\\n    boolean follow;\\r\\n\\r\\n    @Option(names = { \\\"--tail\\\" }, required = false, defaultValue = \\\"-1\\\")\\r\\n    int tail;\\r\\n\\r\\n    @Parameters(index = \\\"0\\\")\\r\\n    String podName;\\r\\n\\r\\n    @Override\\r\\n    public void run() {\\r\\n        log.info(\\\"kubectl logs\\\");\\r\\n        log.info(\\\"-f: {}\\\", follow);\\r\\n        log.info(\\\"--tail: {}\\\", tail);\\r\\n        log.info(\\\"Param 0: {}\\\", podName);\\r\\n    }\\r\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Command 例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"java -jar kubectl.jar logs mypod\\r\\njava -jar kubectl.jar logs -f --tail=20 mypod\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"5.1.3 Sub-subcommand\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"以下都係終點 commands 既例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Command(\\r\\n    name = \\\"pods\\\",\\r\\n    aliases = { \\\"po\\\", \\\"pod\\\" },\\r\\n    description = \\\"This is the 'kubectl get pods' command.\\\"\\r\\n)\\r\\npublic class KubectlGetPodsCommand implements Runnable {\\r\\n\\r\\n    @Override\\r\\n    public void run() {\\r\\n        System.out.println(\\\"kubectl get pods\\\");\\r\\n    }\\r\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Command 例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"java -jar kubectl.jar get po\\r\\njava -jar kubectl.jar get pod\\r\\njava -jar kubectl.jar get pods\\n\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Slf4j\\r\\n@Command(\\r\\n    name = \\\"pods\\\",\\r\\n    aliases = { \\\"po\\\", \\\"pod\\\" },\\r\\n    description = \\\"This is the 'kubectl delete pods' command.\\\"\\r\\n)\\r\\npublic class KubectlDeletePodsCommand implements Runnable {\\r\\n\\r\\n    @Parameters(\\r\\n        index = \\\"0\\\",\\r\\n        description = \\\"A list of pod names.\\\",\\r\\n        arity = \\\"1..*\\\"\\r\\n    )\\r\\n    List\u003cString\u003e podNames;\\r\\n\\r\\n    @Override\\r\\n    public void run() {\\r\\n        log.info(\\\"kubectl delete pods\\\");\\r\\n        log.info(\\\"Param 0: ({} elements) {}\\\", podNames.size(), podNames);\\r\\n    }\\r\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Command 例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"java -jar kubectl.jar delete po pod1\\r\\njava -jar kubectl.jar delete pod pod1\\r\\njava -jar kubectl.jar delete pods pod1\\r\\njava -jar kubectl.jar delete pods pod1 pod2\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":[\"5.2 \",[\"$\",\"code\",null,{\"children\":\"@Option\"}],\"（option）\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"5.2.1 必要 option\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Option(\\r\\n    names = { \\\"-i\\\", \\\"--input\\\" },\\r\\n    required = true\\r\\n)\\r\\nString input;\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"5.2.2 非必要 option\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Option(\\r\\n    names = { \\\"-o\\\", \\\"--output\\\" },\\r\\n    required = false\\r\\n)\\r\\nString output;\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":[\"5.3 \",[\"$\",\"code\",null,{\"children\":\"@Parameters\"}],\"（positional parameter）\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"例子:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Parameters(\\r\\n    index = \\\"0\\\",\\r\\n    description = \\\"1st parameter\\\"\\r\\n)\\r\\nString foo;\\n\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Parameters(\\r\\n    index = \\\"1\\\",\\r\\n    description = \\\"2nd parameter\\\"\\r\\n)\\r\\nString bar;\\n\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Parameters(\\r\\n    index = \\\"2\\\",\\r\\n    description = \\\"3rd parameter (multiple values)\\\",\\r\\n    arity = \\\"1..*\\\"\\r\\n)\\r\\nList\u003cString\u003e varargs;\\n\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"5.3.1 非必要 positional parameter\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"我地可以設置 \",[\"$\",\"code\",null,{\"children\":\"arity\"}],\" 做 \",[\"$\",\"code\",null,{\"children\":\"0..1\"}],\"，咁個 positional parameter 就可有可無。\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Parameter(index = \\\"0\\\", arity = \\\"0..1\\\")\\r\\nString foo;\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"6 Data types\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":[\"6.1 \",[\"$\",\"code\",null,{\"children\":\"String\"}]]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Option(\\r\\n    names = { \\\"--foo\\\" },\\r\\n    defaultValue = \\\"foo\\\" // 任意值\\r\\n)\\r\\nString foo;\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":[\"6.2 \",[\"$\",\"code\",null,{\"children\":\"boolean\"}]]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Option(\\r\\n    names = { \\\"--foo\\\" },\\r\\n    defaultValue = \\\"true\\\" // \\\"true\\\"、\\\"false\\\"\\r\\n)\\r\\nboolean foo;\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":[\"6.3 \",[\"$\",\"code\",null,{\"children\":\"List\u003cString\u003e\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Option、positional parameter 都可以做到 multiple values，用起上黎都係差唔多，默認係用空格分隔開多個值。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"不過要注意既係，就算用左 array 或者 \",[\"$\",\"code\",null,{\"children\":\"Collection\"}],\" types（例如 \",[\"$\",\"code\",null,{\"children\":\"List\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"Set\"}],\"），我地都要額外設置 \",[\"$\",\"code\",null,{\"children\":\"arity\"}],\" 做 \",[\"$\",\"code\",null,{\"children\":\"0..*\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"1..*\"}],\" 之類（即係值既數量既上下限），去覆蓋佢對 multi-valued types 既 \",[\"$\",\"code\",null,{\"children\":\"arity\"}],\" 默認值 \",[\"$\",\"code\",null,{\"children\":\"1\"}],\"。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"除此之外，喺以下既情況下，我地需要設置 \",[\"$\",\"code\",null,{\"children\":\"split\"}],\" 去話畀佢知我地會用咩符號黎分隔多個值：\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"想用空格以外既符號去分隔多個值，例如 \",[\"$\",\"code\",null,{\"children\":\",\"}],\"、\",[\"$\",\"code\",null,{\"children\":\";\"}],\"。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"喺 \",[\"$\",\"code\",null,{\"children\":\"defaultValue\"}],\" 度提供多個值（如果冇設置 \",[\"$\",\"code\",null,{\"children\":\"split\"}],\" 既話會當左做一個帶空格既值）。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"註：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"如果有幾個 options 都係接受多個值，例如 \",[\"$\",\"code\",null,{\"children\":\"--foo 1 2 3 --bar 4 5 6\"}],\"，佢會識得分個值係咪其中一個 option 黎，如果係（例子裡面既 \",[\"$\",\"code\",null,{\"children\":\"--bar\"}],\"），佢會識得分返開佢地，而唔係當左佢係前面 option（例子裡面既 \",[\"$\",\"code\",null,{\"children\":\"--foo\"}],\"）既其中一個值。\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"即使唔係 \",[\"$\",\"code\",null,{\"children\":\"-\"}],\" 或者 \",[\"$\",\"code\",null,{\"children\":\"--\"}],\" 開頭佢都會識分。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"如果有幾個 positional parameters 都接受多個值既話，測試過係會出問題，即使前面既已經設置左 \",[\"$\",\"code\",null,{\"children\":\"arity\"}],\" 數量上限。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Option(\\r\\n    names = { \\\"--foo\\\" },\\r\\n    defaultValue = \\\"item1 item2 item3\\\",\\r\\n    split = \\\" \\\"\\r\\n)\\r\\nList\u003cString\u003e foo;\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Command 例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"--foo item1\\r\\n--foo item1 item2\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"以下既例子用 \",[\"$\",\"code\",null,{\"children\":\",\"}],\" 去分隔多個值：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"@Option(\\r\\n    names = { \\\"--foo\\\" },\\r\\n    defaultValue = \\\"item1,item2,item3\\\", // 要冇 space\\r\\n    split = \\\",\\\"\\r\\n)\\r\\nList\u003cString\u003e foo;\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Command 例子：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"--foo item1\\r\\n--foo item1,item2\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":[\"6.4 \",[\"$\",\"code\",null,{\"children\":\"enum\"}]]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"public static enum MyEnum {\\r\\n    FOO, BAR\\r\\n}\\r\\n\\r\\n@Option(\\r\\n    names = { \\\"--foo\\\" },\\r\\n    defaultValue = \\\"BAR\\\" // 個 enum 既其中一個 constant\\r\\n)\\r\\nMyEnum foo;\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"7 參考資料\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://picocli.info/quick-guide.html\",\"children\":\"Picocli 官方文檔 - Quick Guide\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://picocli.info/#_options_and_parameters\",\"children\":\"Picocli 官方文檔 - 4. Options and Parameters\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://picocli.info/#_multiple_values\",\"children\":\"Picocli 官方文檔 - 6. Multiple Values\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://picocli.info/#_default_arity\",\"children\":\"Picocli 官方文檔 - 6.5 Default Arity\"}]}],\"\\n\"]}]],null,[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"OXTazUI6_kSAkbrD6-Cjk\",{\"children\":[[\"$\",\"$L11\",null,{\"children\":\"$L12\"}],[\"$\",\"$L13\",null,{\"children\":\"$L14\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$15\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"14:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n12:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Michael Chung's e-Portfolio\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Powered by Next.js and React\"}]]\n"])</script><script>self.__next_f.push([1,"10:null\n"])</script></body></html>