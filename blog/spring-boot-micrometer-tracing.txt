1:"$Sreact.fragment"
2:I[8287,["7833","static/chunks/7833-0781b4db521d8fdc.js","7177","static/chunks/app/layout-8d0c24e96ed28322.js"],"default"]
3:I[3339,["8974","static/chunks/app/page-709d1dcf2418e267.js"],"default"]
4:I[2963,["8974","static/chunks/app/page-709d1dcf2418e267.js"],"default"]
5:I[7680,["7833","static/chunks/7833-0781b4db521d8fdc.js","7177","static/chunks/app/layout-8d0c24e96ed28322.js"],"default"]
6:I[5244,[],""]
7:I[3866,[],""]
8:I[6486,["7833","static/chunks/7833-0781b4db521d8fdc.js","7177","static/chunks/app/layout-8d0c24e96ed28322.js"],"default"]
9:I[4547,[],"ClientSegmentRoot"]
a:I[5211,["586","static/chunks/13b76428-e7d338032a603c0d.js","5359","static/chunks/5359-798e8849845065c5.js","8329","static/chunks/app/blog/(blogPosts)/layout-64da3a29d6417a80.js"],"default"]
c:I[6213,[],"OutletBoundary"]
e:I[6213,[],"MetadataBoundary"]
10:I[6213,[],"ViewportBoundary"]
12:I[4835,[],""]
:HL["/e2-next/_next/static/css/5cc717f7082038b9.css","style"]
:HL["/e2-next/_next/static/css/d3df112486f97f47.css","style"]
:HL["/e2-next/_next/static/css/4789c5e017c91193.css","style"]
:HL["/e2-next/_next/static/css/7bfe9ed714480baa.css","style"]
:HL["/e2-next/_next/static/css/78f9432eed794ac2.css","style"]
0:{"P":null,"b":"u2wk1TdI03RPNte2tDG-E","p":"/e2-next","c":["","blog","spring-boot-micrometer-tracing"],"i":false,"f":[[["",{"children":["blog",{"children":["(blogPosts)",{"children":["(2024-03)",{"children":["spring-boot-micrometer-tracing",{"children":["__PAGE__",{}]}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/e2-next/_next/static/css/5cc717f7082038b9.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/e2-next/_next/static/css/d3df112486f97f47.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/e2-next/_next/static/css/4789c5e017c91193.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":[["$","head",null,{"children":[["$","link",null,{"href":"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap","rel":"stylesheet"}],["$","link",null,{"rel":"stylesheet","href":"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"}]]}],["$","body",null,{"children":["$","$L2",null,{"children":["$","$L3",null,{"gap":5,"children":[["$","$L3",null,{"gap":5,"className":"text-center","children":[["$","div",null,{"className":"Ribbon_ribbon-left__fObbI","children":"Next.js"}],["$","$L4",null,{"href":"https://blackr1234.github.io/e2/","variant":"secondary","size":"sm","className":"ButtonToOtherSites_button__K4zwN","children":"➜ Old React website"}],["$","div",null,{"children":[["$","code",null,{"className":"SiteHeader_name__pxX08","children":"Chung Cheuk Hang Michael"}],["$","code",null,{"className":"SiteHeader_title__MUwhy","children":"Java Web Developer"}]]}],["$","$L5",null,{}]]}],["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}],["$","hr",null,{}],["$","$L8",null,{}]]}]}]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["(blogPosts)",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/e2-next/_next/static/css/7bfe9ed714480baa.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L9",null,{"Component":"$a","slots":{"children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","(blogPosts)","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]},"params":{},"promise":"$@b"}]]}],{"children":["(2024-03)",["$","$1","c",{"children":[null,["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","(blogPosts)","children","(2024-03)","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["spring-boot-micrometer-tracing",["$","$1","c",{"children":[null,["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","(blogPosts)","children","(2024-03)","children","spring-boot-micrometer-tracing","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":[[["$","a",null,{"href":"#1-spring-boot-3-既-micrometer-tracing","style":{"textDecoration":"none"},"children":["$","h1",null,{"id":"1-spring-boot-3-既-micrometer-tracing","className":"mdx-components_heading__HrNl3 mdx-components_heading-new-section__YU39B","style":{"zIndex":1000000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"1 Spring Boot 3 既 micrometer tracing"]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"Spring Boot 3 既其中一個比較大既改變，就係唔再支援 Spring Boot Sleuth（又或者話 Spring Boot Sleuth 唔支援 Spring Boot 3）。"}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["根據 ",["$","span",null,{"children":["$","a",null,{"href":"https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"Spring Cloud Sleuth 官方文檔"}]}],"："]}],"\n",["$","blockquote",null,{"children":["\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"!!!! IMPORTANT !!!!"}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"Spring Cloud Sleuth’s last minor version is 3.1. You can check the 3.1.x branch for the latest commits.\r\nSpring Cloud Sleuth will not work with Spring Boot 3.x onward. The last major version of Spring Boot that Sleuth will support is 2.x."}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["The core of this project got moved to ",["$","span",null,{"children":["$","a",null,{"href":"https://micrometer.io/docs/tracing","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"Micrometer Tracing"}]}]," project and the instrumentations will be moved to ",["$","span",null,{"children":["$","a",null,{"href":"https://micrometer.io/","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"Micrometer"}]}]," and all respective projects (no longer all instrumentations will be done in a single repository."]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["You can check the ",["$","span",null,{"children":["$","a",null,{"href":"https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"Micrometer Tracing migration guide"}]}]," to learn how to migrate from Spring Cloud Sleuth to Micrometer Tracing."]}],"\n"]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"即係話，如果我地想繼續喺 HTTP requests 度加入 trace ID、span ID，我地要改用 micrometer tracing。"}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#2-定義","style":{"textDecoration":"none"},"children":["$","h1",null,{"id":"2-定義","className":"mdx-components_heading__HrNl3 mdx-components_heading-new-section__YU39B","style":{"zIndex":2000000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"2 定義"]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"喺 distributed tracing 裡面，我地有 trace ID、span ID 呢兩個 terms。"}],"\n",["$","a",null,{"href":"#21-trace-id","style":{"textDecoration":"none"},"children":["$","h2",null,{"id":"21-trace-id","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":2010000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"2.1 Trace ID"]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"Trace ID 代表緊一個 distributed 既 request workflow，而呢個 request 會訪問好幾個 back-end microservices。利用同一個 trace ID 可以幫我地串連呢啲 back-end microservices，方便我地將同一個 request 既所有 microservices 既所有 application logs 搵出黎 troubleshoot 或者 debug。"}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["進入一個新既 request workflow 既第一個 microservice 會負責生成 trace ID，然後當佢 send HTTP request 去佢既 downstream microservice 既時候，佢會喺個 HTTP request 加入一個 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"traceparent"}]," request header，而個 header value 既格式應該要符合 W3C 既 Trace Context 標準。"]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#22-span-id","style":{"textDecoration":"none"},"children":["$","h2",null,{"id":"22-span-id","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":2020000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"2.2 Span ID"]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"Span ID 代表緊一個 request workflow 裡面既其中一小個 operation，係某一個 microservice 既某一個 operation unit。"}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#3-動手寫","style":{"textDecoration":"none"},"children":["$","h1",null,{"id":"3-動手寫","className":"mdx-components_heading__HrNl3 mdx-components_heading-new-section__YU39B","style":{"zIndex":3000000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"3 動手寫"]}]}],"\n",["$","a",null,{"href":"#31-maven-dependencies","style":{"textDecoration":"none"},"children":["$","h2",null,{"id":"31-maven-dependencies","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":3010000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"3.1 Maven dependencies"]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"所有 microservices 都要有以下既 Maven dependencies："}],"\n",["$","pre",null,{"children":["$","div",null,{"className":"mdx-components_code__3gNm1","style":{"color":"black","background":"#f5f2f0","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto"},"children":["$","code",null,{"className":"language-xml","style":{"whiteSpace":"pre","color":"black","background":"none","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","line-number--1",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[1]}],["$","span","code-segement1",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement2",{"className":"token","style":{"color":"#905"},"children":["parent"]}],["$","span","code-segement3",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--2",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[2]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement7",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement8",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement9",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":["org.springframework.boot"]}],["$","span","code-segement11",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement12",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement13",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--3",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[3]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement17",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement18",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement19",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement20",{"className":"$undefined","style":{},"children":["spring-boot-starter-parent"]}],["$","span","code-segement21",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement22",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement23",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement24",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--4",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[4]}],["$","span","code-segement26",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement27",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement28",{"className":"token","style":{"color":"#905"},"children":["version"]}],["$","span","code-segement29",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement30",{"className":"$undefined","style":{},"children":["3.2.3"]}],["$","span","code-segement31",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement32",{"className":"token","style":{"color":"#905"},"children":["version"]}],["$","span","code-segement33",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement34",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--5",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[5]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement37",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement38",{"className":"token","style":{"color":"#905"},"children":["parent"]}],["$","span","code-segement39",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--6",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[6]}],"\r\n",["$","span","line-number--7",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[7]}],["$","span","code-segement44",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement45",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement46",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement47",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement48",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--8",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[8]}],["$","span","code-segement50",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement52",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement53",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement54",{"className":"$undefined","style":{},"children":["io.micrometer"]}],["$","span","code-segement55",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement56",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement57",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement58",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--9",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[9]}],["$","span","code-segement60",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement61",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement62",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement63",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement64",{"className":"$undefined","style":{},"children":["micrometer-registry-prometheus"]}],["$","span","code-segement65",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement66",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement67",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement68",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--10",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[10]}],["$","span","code-segement70",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement71",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement72",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement73",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement74",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--11",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[11]}],["$","span","code-segement76",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement77",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement78",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement79",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement80",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--12",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[12]}],["$","span","code-segement82",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement83",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement84",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement85",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement86",{"className":"$undefined","style":{},"children":["io.micrometer"]}],["$","span","code-segement87",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement88",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement89",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement90",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--13",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[13]}],["$","span","code-segement92",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement93",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement94",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement95",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement96",{"className":"$undefined","style":{},"children":["micrometer-tracing-bridge-brave"]}],["$","span","code-segement97",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement98",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement99",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement100",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--14",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[14]}],["$","span","code-segement102",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement103",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement104",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement105",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement106",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--15",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[15]}],"\r\n",["$","span","line-number--16",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[16]}],["$","span","code-segement110",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement111",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement112",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement113",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement114",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--17",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[17]}],["$","span","code-segement116",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement117",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement118",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement119",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement120",{"className":"$undefined","style":{},"children":["net.logstash.logback"]}],["$","span","code-segement121",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement122",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement123",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement124",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--18",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[18]}],["$","span","code-segement126",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement127",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement128",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement129",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement130",{"className":"$undefined","style":{},"children":["logstash-logback-encoder"]}],["$","span","code-segement131",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement132",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement133",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement134",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--19",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[19]}],["$","span","code-segement136",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement137",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement138",{"className":"token","style":{"color":"#905"},"children":["version"]}],["$","span","code-segement139",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement140",{"className":"$undefined","style":{},"children":["7.2"]}],["$","span","code-segement141",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement142",{"className":"token","style":{"color":"#905"},"children":["version"]}],["$","span","code-segement143",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement144",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--20",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[20]}],["$","span","code-segement146",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement147",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement148",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement149",{"className":"token","style":{"color":"#999"},"children":[">"]}]]]}]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["如果需要用 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"WebClient"}]," 去 call downstream microservice 既話就加："]}],"\n",["$","pre",null,{"children":["$","div",null,{"className":"mdx-components_code__3gNm1","style":{"color":"black","background":"#f5f2f0","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto"},"children":["$","code",null,{"className":"language-xml","style":{"whiteSpace":"pre","color":"black","background":"none","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement1",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement2",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement5",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement6",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement7",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement8",{"className":"$undefined","style":{},"children":["org.springframework"]}],["$","span","code-segement9",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement10",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement11",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","code-segement13",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement14",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement15",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement16",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement17",{"className":"$undefined","style":{},"children":["spring-webflux"]}],["$","span","code-segement18",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement19",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement20",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement21",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","code-segement22",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement23",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement24",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement25",{"className":"token","style":{"color":"#999"},"children":[">"]}]]]}]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"如果需要用 OpenFeign 去 call downstream microservice 既話就加："}],"\n",["$","pre",null,{"children":["$","div",null,{"className":"mdx-components_code__3gNm1","style":{"color":"black","background":"#f5f2f0","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto"},"children":["$","code",null,{"className":"language-xml","style":{"whiteSpace":"pre","color":"black","background":"none","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","line-number--1",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[1]}],["$","span","code-segement1",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement2",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement3",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--2",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[2]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement7",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement8",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement9",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":["org.springframework.cloud"]}],["$","span","code-segement11",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement12",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement13",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--3",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[3]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement17",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement18",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement19",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement20",{"className":"$undefined","style":{},"children":["spring-cloud-starter-openfeign"]}],["$","span","code-segement21",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement22",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement23",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement24",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--4",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[4]}],["$","span","code-segement26",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement27",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement28",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement29",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement30",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--5",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[5]}],["$","span","code-segement32",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement33",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement34",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement35",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--6",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[6]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement39",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement40",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement41",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement42",{"className":"$undefined","style":{},"children":["io.github.openfeign"]}],["$","span","code-segement43",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement44",{"className":"token","style":{"color":"#905"},"children":["groupId"]}],["$","span","code-segement45",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement46",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--7",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[7]}],["$","span","code-segement48",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement49",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement50",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement52",{"className":"$undefined","style":{},"children":["feign-micrometer"]}],["$","span","code-segement53",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement54",{"className":"token","style":{"color":"#905"},"children":["artifactId"]}],["$","span","code-segement55",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement56",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--8",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[8]}],["$","span","code-segement58",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement59",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement60",{"className":"token","style":{"color":"#905"},"children":["dependency"]}],["$","span","code-segement61",{"className":"token","style":{"color":"#999"},"children":[">"]}]]]}]}]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#32-寫-java-code","style":{"textDecoration":"none"},"children":["$","h2",null,{"id":"32-寫-java-code","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":3020000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"3.2 寫 Java code"]}]}],"\n",["$","a",null,{"href":"#321-spring-resttemplate","style":{"textDecoration":"none"},"children":["$","h3",null,{"id":"321-spring-resttemplate","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":3020100},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],["3.2.1 Spring ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestTemplate"}]]]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["如果要令到 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestTemplate"}]," 識得喺 request header 度 forward micrometer tracing 既 data 去 downstream microservice 度，就要用 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestTemplateBuilder"}]," bean 去創建 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestTemplate"}],"："]}],"\n",["$","pre",null,{"children":["$","div",null,{"className":"mdx-components_code__3gNm1","style":{"color":"black","background":"#f5f2f0","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto"},"children":["$","code",null,{"className":"language-java","style":{"whiteSpace":"pre","color":"black","background":"none","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","line-number--1",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[1]}],["$","span","code-segement1",{"className":"token annotation","style":{"color":"#999"},"children":["@Configuration"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--2",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[2]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement5",{"className":"token","style":{"color":"#07a"},"children":["public"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement7",{"className":"token","style":{"color":"#07a"},"children":["class"]}],["$","span","code-segement8",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement9",{"className":"token","style":{"color":"#DD4A68"},"children":["RestTemplateConfig"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement11",{"className":"token","style":{"color":"#999"},"children":["{"]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--3",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[3]}],"\r\n",["$","span","line-number--4",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[4]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement17",{"className":"token annotation","style":{"color":"#999"},"children":["@Bean"]}],["$","span","code-segement18",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--5",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[5]}],["$","span","code-segement20",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement21",{"className":"token","style":{"color":"#DD4A68"},"children":["RestTemplate"]}],["$","span","code-segement22",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement23",{"className":"token","style":{"color":"#DD4A68"},"children":["restTemplate"]}],["$","span","code-segement24",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement25",{"className":"token","style":{"color":"#DD4A68"},"children":["RestTemplateBuilder"]}],["$","span","code-segement26",{"className":"$undefined","style":{},"children":[" builder"]}],["$","span","code-segement27",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement28",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement29",{"className":"token","style":{"color":"#999"},"children":["{"]}],["$","span","code-segement30",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--6",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[6]}],"\r\n",["$","span","line-number--7",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[7]}],["$","span","code-segement34",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement35",{"className":"token","style":{"color":"#07a"},"children":["final"]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement37",{"className":"token","style":{"color":"#DD4A68"},"children":["RestTemplate"]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":[" restTemplate "]}],["$","span","code-segement39",{"className":"token","style":{"color":"#9a6e3a","background":"hsla(0, 0%, 100%, .5)"},"children":["="]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":[" builder\r\n"]}],["$","span","line-number--8",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[8]}],["$","span","code-segement42",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement43",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement44",{"className":"token","style":{"color":"#DD4A68"},"children":["setConnectTimeout"]}],["$","span","code-segement45",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement46",{"className":"token","style":{"color":"#DD4A68"},"children":["Duration"]}],["$","span","code-segement47",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement48",{"className":"token","style":{"color":"#DD4A68"},"children":["ofSeconds"]}],["$","span","code-segement49",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement50",{"className":"token","style":{"color":"#905"},"children":["10"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement52",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement53",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--9",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[9]}],["$","span","code-segement55",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement56",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement57",{"className":"token","style":{"color":"#DD4A68"},"children":["basicAuthentication"]}],["$","span","code-segement58",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement59",{"className":"token","style":{"color":"#690"},"children":["\"username\""]}],["$","span","code-segement60",{"className":"token","style":{"color":"#999"},"children":[","]}],["$","span","code-segement61",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement62",{"className":"token","style":{"color":"#690"},"children":["\"password\""]}],["$","span","code-segement63",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement64",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--10",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[10]}],["$","span","code-segement66",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement67",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement68",{"className":"token","style":{"color":"#DD4A68"},"children":["defaultHeader"]}],["$","span","code-segement69",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement70",{"className":"token","style":{"color":"#690"},"children":["\"header1\""]}],["$","span","code-segement71",{"className":"token","style":{"color":"#999"},"children":[","]}],["$","span","code-segement72",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement73",{"className":"token","style":{"color":"#690"},"children":["\"header1-value\""]}],["$","span","code-segement74",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement75",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--11",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[11]}],["$","span","code-segement77",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement78",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement79",{"className":"token","style":{"color":"#DD4A68"},"children":["defaultHeader"]}],["$","span","code-segement80",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement81",{"className":"token","style":{"color":"#690"},"children":["\"header2\""]}],["$","span","code-segement82",{"className":"token","style":{"color":"#999"},"children":[","]}],["$","span","code-segement83",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement84",{"className":"token","style":{"color":"#690"},"children":["\"header2-value\""]}],["$","span","code-segement85",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement86",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--12",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[12]}],["$","span","code-segement88",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement89",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement90",{"className":"token","style":{"color":"#DD4A68"},"children":["build"]}],["$","span","code-segement91",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement92",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement93",{"className":"token","style":{"color":"#999"},"children":[";"]}],["$","span","code-segement94",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--13",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[13]}],"\r\n",["$","span","line-number--14",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[14]}],["$","span","code-segement98",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement99",{"className":"token","style":{"color":"slategray"},"children":["// 如果加入左 jackson-dataformat-xml"]}],["$","span","code-segement100",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--15",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[15]}],["$","span","code-segement102",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement103",{"className":"token","style":{"color":"slategray"},"children":["// 令 RestTemplate 唔好喺 Accept request header 度加入 application/xml 或相關既 values"]}],["$","span","code-segement104",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--16",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[16]}],["$","span","code-segement106",{"className":"$undefined","style":{},"children":["        restTemplate"]}],["$","span","code-segement107",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement108",{"className":"token","style":{"color":"#DD4A68"},"children":["getMessageConverters"]}],["$","span","code-segement109",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement110",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement111",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--17",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[17]}],["$","span","code-segement113",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement114",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement115",{"className":"token","style":{"color":"#DD4A68"},"children":["removeIf"]}],["$","span","code-segement116",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement117",{"className":"$undefined","style":{},"children":["e "]}],["$","span","code-segement118",{"className":"token","style":{"color":"#9a6e3a","background":"hsla(0, 0%, 100%, .5)"},"children":["->"]}],["$","span","code-segement119",{"className":"$undefined","style":{},"children":[" e"]}],["$","span","code-segement120",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement121",{"className":"token","style":{"color":"#DD4A68"},"children":["getClass"]}],["$","span","code-segement122",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement123",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement124",{"className":"token","style":{"color":"#9a6e3a","background":"hsla(0, 0%, 100%, .5)"},"children":["=="]}],["$","span","code-segement125",{"className":"token","style":{"color":"#DD4A68"},"children":["MappingJackson2XmlHttpMessageConverter"]}],["$","span","code-segement126",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement127",{"className":"token","style":{"color":"#07a"},"children":["class"]}],["$","span","code-segement128",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement129",{"className":"token","style":{"color":"#999"},"children":[";"]}],["$","span","code-segement130",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--18",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[18]}],"\r\n",["$","span","line-number--19",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[19]}],["$","span","code-segement134",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement135",{"className":"token","style":{"color":"#07a"},"children":["return"]}],["$","span","code-segement136",{"className":"$undefined","style":{},"children":[" restTemplate"]}],["$","span","code-segement137",{"className":"token","style":{"color":"#999"},"children":[";"]}],["$","span","code-segement138",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--20",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[20]}],["$","span","code-segement140",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement141",{"className":"token","style":{"color":"#999"},"children":["}"]}],["$","span","code-segement142",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--21",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[21]}],["$","span","code-segement144",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement145",{"className":"token","style":{"color":"#999"},"children":["}"]}]]]}]}]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#322-spring-webflux-webclient","style":{"textDecoration":"none"},"children":["$","h3",null,{"id":"322-spring-webflux-webclient","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":3020200},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],["3.2.2 Spring Webflux ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"WebClient"}]]]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["如果要令到 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"WebClient"}]," 識得喺 request header 度 forward micrometer tracing 既 data 去 downstream microservice 度，就要用 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"WebClient.Builder"}]," bean 去創建 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"WebClient"}],"："]}],"\n",["$","pre",null,{"children":["$","div",null,{"className":"mdx-components_code__3gNm1","style":{"color":"black","background":"#f5f2f0","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto"},"children":["$","code",null,{"className":"language-java","style":{"whiteSpace":"pre","color":"black","background":"none","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","line-number--1",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[1]}],["$","span","code-segement1",{"className":"token annotation","style":{"color":"#999"},"children":["@Configuration"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--2",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[2]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement5",{"className":"token","style":{"color":"#07a"},"children":["public"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement7",{"className":"token","style":{"color":"#07a"},"children":["class"]}],["$","span","code-segement8",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement9",{"className":"token","style":{"color":"#DD4A68"},"children":["WebClientConfig"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement11",{"className":"token","style":{"color":"#999"},"children":["{"]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--3",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[3]}],"\r\n",["$","span","line-number--4",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[4]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement17",{"className":"token annotation","style":{"color":"#999"},"children":["@Bean"]}],["$","span","code-segement18",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--5",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[5]}],["$","span","code-segement20",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement21",{"className":"token","style":{"color":"#DD4A68"},"children":["WebClient"]}],["$","span","code-segement22",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement23",{"className":"token","style":{"color":"#DD4A68"},"children":["webClient"]}],["$","span","code-segement24",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement25",{"className":"token","style":{"color":"#DD4A68"},"children":["WebClient"]}],["$","span","code-segement26",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement27",{"className":"token","style":{"color":"#DD4A68"},"children":["Builder"]}],["$","span","code-segement28",{"className":"$undefined","style":{},"children":[" builder"]}],["$","span","code-segement29",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement30",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement31",{"className":"token","style":{"color":"#999"},"children":["{"]}],["$","span","code-segement32",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--6",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[6]}],"\r\n",["$","span","line-number--7",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[7]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement37",{"className":"token","style":{"color":"#07a"},"children":["final"]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement39",{"className":"token","style":{"color":"#DD4A68"},"children":["HttpClient"]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":[" httpClient "]}],["$","span","code-segement41",{"className":"token","style":{"color":"#9a6e3a","background":"hsla(0, 0%, 100%, .5)"},"children":["="]}],["$","span","code-segement42",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement43",{"className":"token","style":{"color":"#DD4A68"},"children":["HttpClient"]}],["$","span","code-segement44",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement45",{"className":"token","style":{"color":"#DD4A68"},"children":["newBuilder"]}],["$","span","code-segement46",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement47",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement48",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--8",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[8]}],["$","span","code-segement50",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement51",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement52",{"className":"token","style":{"color":"#DD4A68"},"children":["version"]}],["$","span","code-segement53",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement54",{"className":"token","style":{"color":"#DD4A68"},"children":["Version"]}],["$","span","code-segement55",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement56",{"className":"$undefined","style":{},"children":["HTTP_1_1"]}],["$","span","code-segement57",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement58",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--9",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[9]}],["$","span","code-segement60",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement61",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement62",{"className":"token","style":{"color":"#DD4A68"},"children":["connectTimeout"]}],["$","span","code-segement63",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement64",{"className":"token","style":{"color":"#DD4A68"},"children":["Duration"]}],["$","span","code-segement65",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement66",{"className":"token","style":{"color":"#DD4A68"},"children":["ofSeconds"]}],["$","span","code-segement67",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement68",{"className":"token","style":{"color":"#905"},"children":["10"]}],["$","span","code-segement69",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement70",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement71",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--10",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[10]}],["$","span","code-segement73",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement74",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement75",{"className":"token","style":{"color":"#DD4A68"},"children":["build"]}],["$","span","code-segement76",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement77",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement78",{"className":"token","style":{"color":"#999"},"children":[";"]}],["$","span","code-segement79",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--11",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[11]}],"\r\n",["$","span","line-number--12",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[12]}],["$","span","code-segement83",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement84",{"className":"token","style":{"color":"#07a"},"children":["final"]}],["$","span","code-segement85",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement86",{"className":"token","style":{"color":"#DD4A68"},"children":["WebClient"]}],["$","span","code-segement87",{"className":"$undefined","style":{},"children":[" client "]}],["$","span","code-segement88",{"className":"token","style":{"color":"#9a6e3a","background":"hsla(0, 0%, 100%, .5)"},"children":["="]}],["$","span","code-segement89",{"className":"$undefined","style":{},"children":[" builder\r\n"]}],["$","span","line-number--13",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[13]}],["$","span","code-segement91",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement92",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement93",{"className":"token","style":{"color":"#DD4A68"},"children":["clientConnector"]}],["$","span","code-segement94",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement95",{"className":"token","style":{"color":"#07a"},"children":["new"]}],["$","span","code-segement96",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement97",{"className":"token","style":{"color":"#DD4A68"},"children":["JdkClientHttpConnector"]}],["$","span","code-segement98",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement99",{"className":"$undefined","style":{},"children":["httpClient"]}],["$","span","code-segement100",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement101",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement102",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--14",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[14]}],["$","span","code-segement104",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement105",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement106",{"className":"token","style":{"color":"#DD4A68"},"children":["defaultHeader"]}],["$","span","code-segement107",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement108",{"className":"token","style":{"color":"#DD4A68"},"children":["HttpHeaders"]}],["$","span","code-segement109",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement110",{"className":"$undefined","style":{},"children":["CONTENT_TYPE"]}],["$","span","code-segement111",{"className":"token","style":{"color":"#999"},"children":[","]}],["$","span","code-segement112",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement113",{"className":"token","style":{"color":"#DD4A68"},"children":["MediaType"]}],["$","span","code-segement114",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement115",{"className":"$undefined","style":{},"children":["APPLICATION_JSON_VALUE"]}],["$","span","code-segement116",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement117",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--15",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[15]}],["$","span","code-segement119",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement120",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement121",{"className":"token","style":{"color":"#DD4A68"},"children":["defaultHeader"]}],["$","span","code-segement122",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement123",{"className":"token","style":{"color":"#690"},"children":["\"header1\""]}],["$","span","code-segement124",{"className":"token","style":{"color":"#999"},"children":[","]}],["$","span","code-segement125",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement126",{"className":"token","style":{"color":"#690"},"children":["\"header1-value\""]}],["$","span","code-segement127",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement128",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--16",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[16]}],["$","span","code-segement130",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement131",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement132",{"className":"token","style":{"color":"#DD4A68"},"children":["defaultHeader"]}],["$","span","code-segement133",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement134",{"className":"token","style":{"color":"#690"},"children":["\"header2\""]}],["$","span","code-segement135",{"className":"token","style":{"color":"#999"},"children":[","]}],["$","span","code-segement136",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement137",{"className":"token","style":{"color":"#690"},"children":["\"header2-value\""]}],["$","span","code-segement138",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement139",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--17",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[17]}],["$","span","code-segement141",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement142",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement143",{"className":"token","style":{"color":"#DD4A68"},"children":["build"]}],["$","span","code-segement144",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement145",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement146",{"className":"token","style":{"color":"#999"},"children":[";"]}],["$","span","code-segement147",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--18",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[18]}],"\r\n",["$","span","line-number--19",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[19]}],["$","span","code-segement151",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement152",{"className":"token","style":{"color":"#07a"},"children":["return"]}],["$","span","code-segement153",{"className":"$undefined","style":{},"children":[" client"]}],["$","span","code-segement154",{"className":"token","style":{"color":"#999"},"children":[";"]}],["$","span","code-segement155",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--20",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[20]}],["$","span","code-segement157",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement158",{"className":"token","style":{"color":"#999"},"children":["}"]}],["$","span","code-segement159",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--21",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[21]}],["$","span","code-segement161",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement162",{"className":"token","style":{"color":"#999"},"children":["}"]}]]]}]}]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#323-spring-61-restclient","style":{"textDecoration":"none"},"children":["$","h3",null,{"id":"323-spring-61-restclient","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":3020300},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],["3.2.3 Spring 6.1 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestClient"}]]]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["如果要令到 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestClient"}]," 識得喺 request header 度 forward micrometer tracing 既 data 去 downstream microservice 度，就要用 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestClient.Builder"}]," bean 去創建 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestClient"}],"："]}],"\n",["$","pre",null,{"children":["$","div",null,{"className":"mdx-components_code__3gNm1","style":{"color":"black","background":"#f5f2f0","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto"},"children":["$","code",null,{"className":"language-java","style":{"whiteSpace":"pre","color":"black","background":"none","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","line-number--1",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[1]}],["$","span","code-segement1",{"className":"token annotation","style":{"color":"#999"},"children":["@Configuration"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--2",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[2]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement5",{"className":"token","style":{"color":"#07a"},"children":["public"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement7",{"className":"token","style":{"color":"#07a"},"children":["class"]}],["$","span","code-segement8",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement9",{"className":"token","style":{"color":"#DD4A68"},"children":["RestClientConfig"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement11",{"className":"token","style":{"color":"#999"},"children":["{"]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--3",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[3]}],"\r\n",["$","span","line-number--4",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[4]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement17",{"className":"token annotation","style":{"color":"#999"},"children":["@Bean"]}],["$","span","code-segement18",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--5",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[5]}],["$","span","code-segement20",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement21",{"className":"token","style":{"color":"#DD4A68"},"children":["RestClient"]}],["$","span","code-segement22",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement23",{"className":"token","style":{"color":"#DD4A68"},"children":["restClient"]}],["$","span","code-segement24",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement25",{"className":"token","style":{"color":"#DD4A68"},"children":["RestClient"]}],["$","span","code-segement26",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement27",{"className":"token","style":{"color":"#DD4A68"},"children":["Builder"]}],["$","span","code-segement28",{"className":"$undefined","style":{},"children":[" builder"]}],["$","span","code-segement29",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement30",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement31",{"className":"token","style":{"color":"#999"},"children":["{"]}],["$","span","code-segement32",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--6",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[6]}],"\r\n",["$","span","line-number--7",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[7]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement37",{"className":"token","style":{"color":"#07a"},"children":["final"]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement39",{"className":"token","style":{"color":"#DD4A68"},"children":["RestClient"]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":[" client "]}],["$","span","code-segement41",{"className":"token","style":{"color":"#9a6e3a","background":"hsla(0, 0%, 100%, .5)"},"children":["="]}],["$","span","code-segement42",{"className":"$undefined","style":{},"children":[" builder\r\n"]}],["$","span","line-number--8",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[8]}],["$","span","code-segement44",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement45",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement46",{"className":"token","style":{"color":"#DD4A68"},"children":["defaultHeader"]}],["$","span","code-segement47",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement48",{"className":"token","style":{"color":"#DD4A68"},"children":["HttpHeaders"]}],["$","span","code-segement49",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement50",{"className":"$undefined","style":{},"children":["CONTENT_TYPE"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#999"},"children":[","]}],["$","span","code-segement52",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement53",{"className":"token","style":{"color":"#DD4A68"},"children":["MediaType"]}],["$","span","code-segement54",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement55",{"className":"$undefined","style":{},"children":["APPLICATION_JSON_VALUE"]}],["$","span","code-segement56",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement57",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--9",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[9]}],["$","span","code-segement59",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement60",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement61",{"className":"token","style":{"color":"#DD4A68"},"children":["defaultHeader"]}],["$","span","code-segement62",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement63",{"className":"token","style":{"color":"#690"},"children":["\"header1\""]}],["$","span","code-segement64",{"className":"token","style":{"color":"#999"},"children":[","]}],["$","span","code-segement65",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement66",{"className":"token","style":{"color":"#690"},"children":["\"header1-value\""]}],["$","span","code-segement67",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement68",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--10",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[10]}],["$","span","code-segement70",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement71",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement72",{"className":"token","style":{"color":"#DD4A68"},"children":["defaultHeader"]}],["$","span","code-segement73",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement74",{"className":"token","style":{"color":"#690"},"children":["\"header2\""]}],["$","span","code-segement75",{"className":"token","style":{"color":"#999"},"children":[","]}],["$","span","code-segement76",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement77",{"className":"token","style":{"color":"#690"},"children":["\"header2-value\""]}],["$","span","code-segement78",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement79",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--11",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[11]}],["$","span","code-segement81",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement82",{"className":"token","style":{"color":"#999"},"children":["."]}],["$","span","code-segement83",{"className":"token","style":{"color":"#DD4A68"},"children":["build"]}],["$","span","code-segement84",{"className":"token","style":{"color":"#999"},"children":["("]}],["$","span","code-segement85",{"className":"token","style":{"color":"#999"},"children":[")"]}],["$","span","code-segement86",{"className":"token","style":{"color":"#999"},"children":[";"]}],["$","span","code-segement87",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--12",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[12]}],"\r\n",["$","span","line-number--13",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[13]}],["$","span","code-segement91",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement92",{"className":"token","style":{"color":"#07a"},"children":["return"]}],["$","span","code-segement93",{"className":"$undefined","style":{},"children":[" client"]}],["$","span","code-segement94",{"className":"token","style":{"color":"#999"},"children":[";"]}],["$","span","code-segement95",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--14",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[14]}],["$","span","code-segement97",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement98",{"className":"token","style":{"color":"#999"},"children":["}"]}],["$","span","code-segement99",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--15",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[15]}],["$","span","code-segement101",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement102",{"className":"token","style":{"color":"#999"},"children":["}"]}]]]}]}]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#324-spring-cloud-openfeign","style":{"textDecoration":"none"},"children":["$","h3",null,{"id":"324-spring-cloud-openfeign","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":3020400},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"3.2.4 Spring Cloud OpenFeign"]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["如果要令到 OpenFeign 識得喺 request header 度 forward micrometer tracing 既 data 去目標既 microservice 度，只需要喺 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"pom.xml"}]," 加入 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"io.github.openfeign:feign-micrometer"}]," 既 Maven dependency。"]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"呢個 dependency 既版本由以下既 dependency management BOMs 控制。"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":[["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"org.springframework.cloud:spring-cloud-dependencies"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":[["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"org.springframework.cloud:spring-cloud-openfeign-dependencies"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"io.github.openfeign:feign-bom"}]}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#33-logback-配置","style":{"textDecoration":"none"},"children":["$","h2",null,{"id":"33-logback-配置","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":3030000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"3.3 Logback 配置"]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["最後一步，我地需要喺 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"logback.xml"}]," 裡面加入 trace ID 以及 span ID 既 MDC fields，咁喺 application logs 度就可以睇到佢地。"]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["因為係 distributed microservices 既關係，我地如果用好似 ELK 咁既 centralized logging platform 既話，一定要可以分得到唔同既 microservices 既 logs，咁就要喺 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"logback.xml"}]," 既 encoders 度配置好："]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["Host name，可以直接用 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"$${HOSTNAME:-}"}]," 或者 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"$${hostname:-}"}],"。"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["Spring application name，可以加入以下既配置，之後就可以用 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"$${app_name:-}"}],"：","\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["\n",["$","pre",null,{"children":["$","div",null,{"className":"mdx-components_code__3gNm1","style":{"color":"black","background":"#f5f2f0","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto"},"children":["$","code",null,{"className":"language-xml","style":{"whiteSpace":"pre","color":"black","background":"none","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"slategray"},"children":["<!-- 喺 configuration 裡面 -->"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement3",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement4",{"className":"token","style":{"color":"#905"},"children":["springProperty"]}],["$","span","code-segement5",{"className":"token","style":{"color":"#905"},"children":[" "]}],["$","span","code-segement6",{"className":"token","style":{"color":"#690"},"children":["scope"]}],["$","span","code-segement7",{"className":"token attr-equals","style":{"color":"#999"},"children":["="]}],["$","span","code-segement8",{"className":"token","style":{"color":"#999"},"children":["\""]}],["$","span","code-segement9",{"className":"token","style":{"color":"#07a"},"children":["context"]}],["$","span","code-segement10",{"className":"token","style":{"color":"#999"},"children":["\""]}],["$","span","code-segement11",{"className":"token","style":{"color":"#905"},"children":[" "]}],["$","span","code-segement12",{"className":"token","style":{"color":"#690"},"children":["name"]}],["$","span","code-segement13",{"className":"token attr-equals","style":{"color":"#999"},"children":["="]}],["$","span","code-segement14",{"className":"token","style":{"color":"#999"},"children":["\""]}],["$","span","code-segement15",{"className":"token","style":{"color":"#07a"},"children":["app_name"]}],["$","span","code-segement16",{"className":"token","style":{"color":"#999"},"children":["\""]}],["$","span","code-segement17",{"className":"token","style":{"color":"#905"},"children":[" "]}],["$","span","code-segement18",{"className":"token","style":{"color":"#690"},"children":["source"]}],["$","span","code-segement19",{"className":"token attr-equals","style":{"color":"#999"},"children":["="]}],["$","span","code-segement20",{"className":"token","style":{"color":"#999"},"children":["\""]}],["$","span","code-segement21",{"className":"token","style":{"color":"#07a"},"children":["spring.application.name"]}],["$","span","code-segement22",{"className":"token","style":{"color":"#999"},"children":["\""]}],["$","span","code-segement23",{"className":"token","style":{"color":"#905"},"children":[" "]}],["$","span","code-segement24",{"className":"token","style":{"color":"#999"},"children":["/>"]}]]]}]}]}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["詳情可以睇返呢篇：",["$","span",null,{"children":["$","a",null,{"href":"/e2-next/blog/spring-boot-elk-logging","className":"common_anchor__kGNsN","children":"Spring 項目使用 ELK 做 logging"}]}],"。"]}],"\n",["$","a",null,{"href":"#331-自定義-encoder-pattern","style":{"textDecoration":"none"},"children":["$","h3",null,{"id":"331-自定義-encoder-pattern","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":3030100},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"3.3.1 自定義 encoder pattern"]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"如果要喺自定義既 encoder pattern 裡面加入 trace ID 以及 span ID，我地可以用："}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"%X{traceId:-}"}]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"%X{spanId:-}"}]}],"\n"]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"例子："}],"\n",["$","pre",null,{"children":["$","div",null,{"className":"mdx-components_code__3gNm1","style":{"color":"black","background":"#f5f2f0","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto"},"children":["$","code",null,{"className":"language-xml","style":{"whiteSpace":"pre","color":"black","background":"none","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"slategray"},"children":["<!-- 喺 appender 裡面 -->"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement3",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement4",{"className":"token","style":{"color":"#905"},"children":["encoder"]}],["$","span","code-segement5",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement8",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement9",{"className":"token","style":{"color":"#905"},"children":["pattern"]}],["$","span","code-segement10",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement11",{"className":"$undefined","style":{},"children":["[${hostname:-} ${app_name:-}] [%X{traceId:-} %X{spanId:-}] %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} (%file:%line\\) - %msg%n"]}],["$","span","code-segement12",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement13",{"className":"token","style":{"color":"#905"},"children":["pattern"]}],["$","span","code-segement14",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement15",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement17",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement18",{"className":"token","style":{"color":"#905"},"children":["encoder"]}],["$","span","code-segement19",{"className":"token","style":{"color":"#999"},"children":[">"]}]]]}]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":"註："}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["呢度既 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":":-"}]," 係用黎分隔 key、value 既字符，佢既前面係 MDC key，後面係 value。","\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["佢同 Spring 既 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":":"}]," 一樣意思，只不過係 Logback 揀左用 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":":-"}],"。"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":[["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"%X{key:-}"}]," 既意思係如果 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"key"}]," 呢個 MDC key 未有 data 既話就會出 empty string（唔好誤以為會出 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"-"}],"）。"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":[["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"%X{key:-foo}"}]," 既意思係如果 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"key"}]," 呢個 MDC key 未有 data 既話就會出 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"foo"}],"。"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#332-logstash-logback-encoder","style":{"textDecoration":"none"},"children":["$","h3",null,{"id":"332-logstash-logback-encoder","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":3030200},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"3.3.2 Logstash Logback Encoder"]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["如果係用 Logstash Logback Encoder，亦即係 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"net.logstash.logback:logstash-logback-encoder"}]," 既 Maven dependency，咁我地就要用佢既 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"includeMdcKeyName"}]," XML element 去加入 trace ID 以及 span ID："]}],"\n",["$","pre",null,{"children":["$","div",null,{"className":"mdx-components_code__3gNm1","style":{"color":"black","background":"#f5f2f0","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto"},"children":["$","code",null,{"className":"language-xml","style":{"whiteSpace":"pre","color":"black","background":"none","textShadow":"0 1px white","fontFamily":"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace","fontSize":"1em","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","line-number--1",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[1]}],["$","span","code-segement1",{"className":"token","style":{"color":"slategray"},"children":["<!-- 喺 appender 裡面 -->"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--2",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[2]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement5",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement6",{"className":"token","style":{"color":"#905"},"children":["encoder"]}],["$","span","code-segement7",{"className":"token","style":{"color":"#905"},"children":[" "]}],["$","span","code-segement8",{"className":"token","style":{"color":"#690"},"children":["class"]}],["$","span","code-segement9",{"className":"token attr-equals","style":{"color":"#999"},"children":["="]}],["$","span","code-segement10",{"className":"token","style":{"color":"#999"},"children":["\""]}],["$","span","code-segement11",{"className":"token","style":{"color":"#07a"},"children":["net.logstash.logback.encoder.LogstashEncoder"]}],["$","span","code-segement12",{"className":"token","style":{"color":"#999"},"children":["\""]}],["$","span","code-segement13",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--3",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[3]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement17",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement18",{"className":"token","style":{"color":"#905"},"children":["includeContext"]}],["$","span","code-segement19",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement20",{"className":"$undefined","style":{},"children":["false"]}],["$","span","code-segement21",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement22",{"className":"token","style":{"color":"#905"},"children":["includeContext"]}],["$","span","code-segement23",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement24",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--4",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[4]}],["$","span","code-segement26",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement27",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement28",{"className":"token","style":{"color":"#905"},"children":["includeMdcKeyName"]}],["$","span","code-segement29",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement30",{"className":"$undefined","style":{},"children":["traceId"]}],["$","span","code-segement31",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement32",{"className":"token","style":{"color":"#905"},"children":["includeMdcKeyName"]}],["$","span","code-segement33",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement34",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--5",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[5]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement37",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement38",{"className":"token","style":{"color":"#905"},"children":["includeMdcKeyName"]}],["$","span","code-segement39",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":["spanId"]}],["$","span","code-segement41",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement42",{"className":"token","style":{"color":"#905"},"children":["includeMdcKeyName"]}],["$","span","code-segement43",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement44",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--6",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[6]}],["$","span","code-segement46",{"className":"$undefined","style":{},"children":["\t"]}],["$","span","code-segement47",{"className":"token","style":{"color":"#999"},"children":["<"]}],["$","span","code-segement48",{"className":"token","style":{"color":"#905"},"children":["customFields"]}],["$","span","code-segement49",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement50",{"className":"$undefined","style":{},"children":["{ \"host\": \"${hostname:-}\", \"app_name\": \"${app_name:-}\" }"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement52",{"className":"token","style":{"color":"#905"},"children":["customFields"]}],["$","span","code-segement53",{"className":"token","style":{"color":"#999"},"children":[">"]}],["$","span","code-segement54",{"className":"$undefined","style":{},"children":["\r\n"]}],["$","span","line-number--7",{"className":"linenumber react-syntax-highlighter-line-number","style":{"display":"inline-block","minWidth":"3.25em","paddingRight":"1em","textAlign":"right","userSelect":"none","position":"sticky","left":"-18px","background":"#cbcfdc !important","borderRight":"1px solid #9e9e9e","marginRight":"1rem","color":"slategray"},"children":[7]}],["$","span","code-segement56",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement57",{"className":"token","style":{"color":"#999"},"children":["</"]}],["$","span","code-segement58",{"className":"token","style":{"color":"#905"},"children":["encoder"]}],["$","span","code-segement59",{"className":"token","style":{"color":"#999"},"children":[">"]}]]]}]}]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["加左之後，每一個 log entry 既 JSON data 裡面都會多左 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"traceId"}]," 以及 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"spanId"}]," 既 key-value pairs。"]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#4-測試","style":{"textDecoration":"none"},"children":["$","h1",null,{"id":"4-測試","className":"mdx-components_heading__HrNl3 mdx-components_heading-new-section__YU39B","style":{"zIndex":4000000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"4 測試"]}]}],"\n",["$","a",null,{"href":"#41-本地測試","style":{"textDecoration":"none"},"children":["$","h2",null,{"id":"41-本地測試","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":4010000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"4.1 本地測試"]}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"我地需要 set up 至少兩個 Spring Boot microservices。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"全部 microservices 都要 expose 至少一個 HTTP REST endpoints。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["除左最後一個只會被 call 但唔會 initiate call 既 microservice，我地要為所有作為 upstream 既其他 microservices 寫 HTTP call 既 code。","\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"HTTP REST call flow：Service A ➜ Service B ➜ Service C 等等。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["HTTP REST call 既 implementation 可以係 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestTemplate"}],"、",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"WebClient"}],"、",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestClient"}]," 或者 OpenFeign。"]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"用 cURL call Service A 既 HTTP REST endpoint。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["檢查所有 microservices 既 console logs。","\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["應該會見到只有一個 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"32"}]," 個位長度 alphanumeric 既 trace ID。"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["應該會見到每個 microservice 都有啲唔同既 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"16"}]," 個位長度 alphanumeric 既 span IDs。"]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"再用 cURL call Service A 既 HTTP REST endpoint。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["再檢查所有 microservices 既 console logs。","\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"應該會見到一個完全唔同既 trace ID。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"應該會見到每個 microservice 又有啲唔同既 span IDs。"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#42-測試發送-logs-去-elk","style":{"textDecoration":"none"},"children":["$","h2",null,{"id":"42-測試發送-logs-去-elk","className":"mdx-components_heading__HrNl3 mdx-components_heading-sub-section__AJ2JK","style":{"zIndex":4020000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"4.2 測試發送 logs 去 ELK"]}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"我地需要 set up 至少兩個 Spring Boot microservices。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["我地要配置好全部 microservices 既 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"logback.xml"}],"，將 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"<appender>"}]," 既 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"<destination>"}]," 配置為 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"127.0.0.1:5000"}],"，咁啲 logs 就會發送到本地部署既 Logstash。"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"全部 microservices 都要 expose 至少一個 HTTP REST endpoints。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["除左最後一個只會被 call 但唔會 initiate call 既 microservice，我地要為所有作為 upstream 既其他 microservices 寫 HTTP call 既 code。","\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"HTTP REST call flow：Service A ➜ Service B ➜ Service C 等等。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["HTTP REST call 既 implementation 可以係 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestTemplate"}],"、",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"WebClient"}],"、",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"RestClient"}]," 或者 OpenFeign。"]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"用 cURL call Service A 既 HTTP REST endpoint。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["打開 ",["$","span",null,{"children":["$","a",null,{"href":"http://localhost:5601","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"http://localhost:5601"}]}]," 檢查我地喺 Kibana 既 data view。","\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["應該會見到只有一個 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"32"}]," 個位長度 alphanumeric 既 trace ID。"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["應該會見到每個 microservice 都有啲唔同既 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"16"}]," 個位長度 alphanumeric 既 span IDs。"]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"再用 cURL call Service A 既 HTTP REST endpoint。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["再打開 ",["$","span",null,{"children":["$","a",null,{"href":"http://localhost:5601","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"http://localhost:5601"}]}]," 檢查我地喺 Kibana 既 data view。","\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"應該會見到一個完全唔同既 trace ID。"}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":"應該會見到每個 microservice 又有啲唔同既 span IDs。"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["我地可以撳落 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"traceId"}]," column 既某一個 cell value 隔籬既 ",["$","code",null,{"className":"undefined mdx-components_inline-code__y_QeQ","children":"⊕"}]," 號（「Filter for this traceId」），咁就可以睇曬所有同呢個 trace ID 有關係既 logs。"]}],"\n"]}],"\n",["$","div",null,{"className":"mdx-components_paragraph__AUxxF","children":["$","img",null,{"src":"/e2-next/blog/2024-03/spring-boot-micrometer-tracing/kibana-search-logs-with-traceId.png","className":"mdx-components_image__4jSiz"}]}],"\n",["$","hr",null,{"className":"mdx-components_hr__o_oFr"}],"\n",["$","a",null,{"href":"#5-參考資料","style":{"textDecoration":"none"},"children":["$","h1",null,{"id":"5-參考資料","className":"mdx-components_heading__HrNl3 mdx-components_heading-new-section__YU39B","style":{"zIndex":5000000},"children":[["$","i",null,{"className":"fa-solid fa-link mdx-components_heading-link__r6M6c"}],"5 參考資料"]}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["$","span",null,{"children":["$","a",null,{"href":"https://spring.io/blog/2022/10/12/observability-with-spring-boot-3","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"Spring 官方 blog - Observability with Spring Boot 3"}]}]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["$","span",null,{"children":["$","a",null,{"href":"https://docs.spring.io/spring-framework/reference/integration/observability.html","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"Spring 官方文檔 - Observability Support"}]}]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["$","span",null,{"children":["$","a",null,{"href":"https://github.com/logfellow/logstash-logback-encoder?tab=readme-ov-file#mdc-fields","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"GitHub - logfellow/logstash-logback-encoder - Logstash Logback Encoder - MDC fields"}]}]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["$","span",null,{"children":["$","a",null,{"href":"https://opentelemetry.io/docs/concepts/signals/traces/","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"OpenTelemetry - Traces"}]}]}],"\n",["$","li",null,{"className":"mdx-components_list-item__fJ1NL","children":["$","span",null,{"children":["$","a",null,{"href":"https://github.com/w3c/trace-context/blob/main/spec/20-http_request_header_format.md","target":"_blank","rel":"external nofollow noopener noreferrer","className":"common_anchor__kGNsN","children":"GitHub - w3c/trace-context - Trace Context HTTP Request Headers Format"}]}]}],"\n"]}]],[["$","link","0",{"rel":"stylesheet","href":"/e2-next/_next/static/css/78f9432eed794ac2.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$Lc",null,{"children":"$Ld"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","PRGX4To0W4NXcDpRpY5v2",{"children":[["$","$Le",null,{"children":"$Lf"}],["$","$L10",null,{"children":"$L11"}],null]}]]}],false]],"m":"$undefined","G":["$12","$undefined"],"s":false,"S":true}
b:{}
11:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
f:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Blog posts"}],["$","meta","2",{"name":"description","content":"Powered by Next.js and React"}],["$","link","3",{"rel":"icon","href":"/e2-next/favicon.ico","type":"image/x-icon","sizes":"48x48"}]]
d:null
