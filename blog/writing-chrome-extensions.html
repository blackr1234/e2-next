<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="blog/2020-10/writing-chrome-extensions/before-home-page.png"/><link rel="preload" as="image" href="blog/2020-10/writing-chrome-extensions/before-downloading.png"/><link rel="preload" as="image" href="blog/2020-10/writing-chrome-extensions/after-home-page.png"/><link rel="preload" as="image" href="blog/2020-10/writing-chrome-extensions/after-downloading.png"/><link rel="preload" as="image" href="blog/2020-10/writing-chrome-extensions/chrome-extensions.png"/><link rel="stylesheet" href="/e2-next/_next/static/css/d3df112486f97f47.css" data-precedence="next"/><link rel="stylesheet" href="/e2-next/_next/static/css/c3624a693ae5a0c4.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/e2-next/_next/static/chunks/webpack-f088da4552bcc253.js"/><script src="/e2-next/_next/static/chunks/4bd1b696-120f4d9c40d223dd.js" async=""></script><script src="/e2-next/_next/static/chunks/1517-c8d232d43a11224c.js" async=""></script><script src="/e2-next/_next/static/chunks/main-app-05c45cc8f30d6cea.js" async=""></script><script src="/e2-next/_next/static/chunks/7829-b7b9eb1dbe0d40e4.js" async=""></script><script src="/e2-next/_next/static/chunks/2153-45fd9844831c6348.js" async=""></script><script src="/e2-next/_next/static/chunks/app/layout-ea91c2d128ec48c2.js" async=""></script><script src="/e2-next/_next/static/chunks/app/page-c8b940db14fac9a0.js" async=""></script><title>Michael Chung&#x27;s e-Portfolio</title><meta name="description" content="Powered by Next.js and React"/><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/><script src="/e2-next/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="vstack gap-5"><div class="text-center vstack gap-5"><div><code class="SiteHeader_name__cwQmL">Chung Cheuk Hang Michael</code><code class="SiteHeader_title__CCfvI">Java Web Developer</code></div><nav class="justify-content-center navbar navbar-expand-md navbar-dark"><button type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="justify-content-center navbar-collapse collapse"><div class="justify-content-center navbar-nav nav-underline"><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/" class="nav-link" href="/e2-next">Home</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/work" class="nav-link" href="/e2-next/work">Work</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/hobbyProjects" class="nav-link" href="/e2-next/hobbyProjects">Hobby projects</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/personality" class="nav-link" href="/e2-next/personality">Personality</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/blog" class="nav-link" href="/e2-next/blog">Blog</a></div></div></div></nav></div><h2>1 關於 Chrome Extension</h2>
<p>相信大家對 Chrome extension 都唔陌生，因為大部分人都係 ad blocker plugins 既 user，知道瀏覽器係可以安裝一啲小插件黎優化用戶體驗（UX）。</p>
<p>其實呢啲小插件係可以自己寫，而且非常簡單。</p>
<hr/>
<h2>2 需求情境</h2>
<p>呢篇文章會教大家動手寫一個 Chrome extension，用黎去除 uTorrent Web 網頁各種各樣既多餘網頁 components，令到版面更簡潔。</p>
<p>uTorrent Web 係一個專門用黎 BT 下載既電腦程式，需要自行下載安裝，佢個程式介面係用網頁既形式呈現，所以叫 uTorrent Web，有別於以前既 uTorrent（PC 客戶端）。</p>
<hr/>
<h2>3 比較原貌及結果</h2>
<p>先畀大家睇下我地既 before &amp; after 會相差幾遠。</p>
<h3>3.1 Before</h3>
<p><img src="blog/2020-10/writing-chrome-extensions/before-home-page.png" alt=""/></p>
<p><img src="blog/2020-10/writing-chrome-extensions/before-downloading.png" alt=""/></p>
<hr/>
<h3>3.2 After</h3>
<p><img src="blog/2020-10/writing-chrome-extensions/after-home-page.png" alt=""/></p>
<p><img src="blog/2020-10/writing-chrome-extensions/after-downloading.png" alt=""/></p>
<hr/>
<h2>4 動手寫</h2>
<h3>4.1 Project structure</h3>
<p>我地呢個 project folder 會有以下檔案：</p>
<table><thead><tr><th>檔案</th><th>用途</th></tr></thead><tbody><tr><td><code>manifest.json</code></td><td>關於呢個 Chrome extension 既 metadata。Chrome 會讀取，咁就知道邊啲網頁要用呢個 extension，邊啲唔洗，同埋知道需要執行既 JavaScript 資源既位置</td></tr><tr><td><code>content.js</code></td><td>我地既程式入口，類似 Java 既 <code>main</code> method，喺 Chrome load 完 dependency 既 libraries（即係我地既 <code>jquery.js</code>）之後就會執行</td></tr><tr><td><code>js/jquery.js</code></td><td>jQuery 係一個打橫行既 JavaScript library，可以肆意修改整個 DOM tree，係傳統網頁必備既 library</td></tr></tbody></table>
<hr/>
<h3>4.2 寫 <code>manifest.json</code></h3>
<p><code>manifest.json</code> 負責話畀 Chrome 知道我地呢個 extension 既全名、簡單描述、URL 匹配同權限，以及要執行既 JavaScript 檔案。</p>
<p>因為 uTorrent Web 既 URL 有時會係 <code>utweb.trontv.com</code> 有時會係 <code>127.0.0.1</code>，所以就有兩個，但一般都只係得一個。</p>
<p>至於 <code>js</code>，次序一定要岩，dependency libraries 行先，之後先到我地寫既入口主程式（類似 Java 既 <code>main</code> method）。</p>
<pre><code class="language-json">{
	&quot;name&quot;: &quot;uTorrent Web Plugin&quot;,
	&quot;version&quot;: &quot;1.0&quot;,
	&quot;description&quot;: &quot;Remove ads&quot;,
	&quot;content_scripts&quot;: [
		{
			&quot;matches&quot;: [&quot;*://utweb.trontv.com/*&quot;, &quot;*://127.0.0.1/*&quot;],
			&quot;js&quot;: [&quot;js/jquery.js&quot;, &quot;content.js&quot;],
			&quot;run_at&quot;: &quot;document_start&quot;
		}
	],
	&quot;manifest_version&quot;: 2
}
</code></pre>
<hr/>
<h3>4.3 寫 <code>content.js</code></h3>
<p>我地想要一個簡潔版本既 uTorrent Web，其實只需要不斷將多餘既 components 刪除就可以。</p>
<p>Windows 下撳 <code>F12</code> 或者 macOS 下撳 <code>Option</code> + <code>Command</code> + <code>I</code>，然後喺 Chrome developer tools 既 Elements tab 下撳左上角既箭嘴掣，手動黎喺頁面上視覺定位不同既多餘 DOM nodes，Chrome developer tools 會幫我地定位 DOM node 既位置，然後我地可以自行判決點樣 programmatically 定位呢啲 DOM nodes。</p>
<p>我地會想寫到呢個 Chrome extension 可以無限 loop 咁行，因為有時啲網頁完成加載既時間可能好長，有啲 components 亦可能係之後先加入，亦可能因為某啲操作（當我地新增 BT 下載任務既時候）而令頁面再次改變，所以係有必要無限 loop。</p>
<table><thead><tr><th>多餘既 DOM node（CSS selector）</th><th>對應頁面位置</th></tr></thead><tbody><tr><td><code>.nav-tabs &gt; :not([id=auto-settings-btn])</code></td><td>頂部右方設定掣左邊既兩個掣，分別係 Safe Torrrent Scanner 及 Help</td></tr><tr><td><code>footer[id=ads-privacy-footer]</code></td><td>最底既 Terms of Service、Privacy Policy 及 copyright</td></tr><tr><td><code>[id=sidebar]</code></td><td>左手邊既 sidebar menu</td></tr><tr><td><code>div.tutorial-video-container</code></td><td>正右方既 Watch this video on torrenting 連影片</td></tr><tr><td><code>div.media-cover</code></td><td>當有下載任務時，下載任務左手邊有個影片播放器</td></tr><tr><td><code>div.search-control-nav-main</code></td><td>正中既 Search for a torrent 搜尋列</td></tr><tr><td><code>[id=jw-player-container]</code></td><td>正下方既影片</td></tr><tr><td><code>.search-header</code></td><td>正中既 Stream torrents while you download</td></tr></tbody></table>
<pre><code class="language-js">// 無限 loop 既配置，一開始會行得密啲，之後就會放慢
const MAX_RUN = Infinity;
const DELAY_INCREMENT = 25;
const DELAY_MAX = 1000;
var delay = 25;

// 用於 jQuery 既 CSS selector，喺 Chrome developer tools 既 Elements tab 可以用佢黎 search
const SELECTOR = `
    .nav-tabs &gt; :not([id=auto-settings-btn]),
    footer[id=ads-privacy-footer],
    [id=sidebar],
    div.tutorial-video-container,
    div.media-cover,
    div.search-control-nav-main,
    [id=jw-player-container],
    .search-header
`;

const run = () =&gt; {
	let i = 0;

	const _run = () =&gt; {
		if (i === MAX_RUN) {
			return;
		}

		i++;
		console.log(&quot;Running iteration &quot; + i); // 喺 Chrome developer tools 既 Console 會見到

		const result = $(SELECTOR);

		if (!(result.length &gt; 0)) {
			// 如果未搵到（可能係頁面未 load 好）
			setTimeout(_run, delay);
			delay = Math.min(delay + DELAY_INCREMENT, DELAY_MAX);
			return;
		}

		// 將多餘野設置為唔顯示

		result.css(&quot;display&quot;, &quot;none&quot;);

		$(&quot;.media-library-top-container.show-ad&quot;).removeClass(&quot;show-ad&quot;);

		setTimeout(_run, delay);
		delay = Math.min(delay + DELAY_INCREMENT, DELAY_MAX);
	};

	_run();
};

run(); // call 上面 define 既 run function
</code></pre>
<hr/>
<h3>4.4 下載 <code>jquery.js</code></h3>
<p>正因為 jQuery 太強大，可以肆意修改整個 DOM tree，所以佢係傳統網頁必備既 dependency library（但新派做法已經棄用 jQuery）。正正就係我地刪除多餘 DOM nodes 需要用到。</p>
<p>我地需要將呢個 jQuery library 既 code 下載落黎。只需要 right click 下面條 link，save as <code>js/jquery.js</code> 即可：</p>
<p><a href="https://code.jquery.com/jquery-3.5.1.min.js">https://code.jquery.com/jquery-3.5.1.min.js</a></p>
<hr/>
<h2>5 安裝</h2>
<p>去 <code>chrome://extensions</code> 度，打開右上角 Developer mode 既開關，撳 Load unpacked，然後揀我地個 project folder。</p>
<p>之後我地會見到多左個我地個 Chrome extension（請確保開關掣係開住）。呢個時候我地可以 refresh 一下 uTorrent Web 個網頁，<a href="#32-after">就會見到係極致地簡潔！</a></p>
<p><img src="blog/2020-10/writing-chrome-extensions/chrome-extensions.png" alt=""/></p><hr/><div class="vstack gap-3"><div class="text-center container"><div class="justify-content-center g-3 row row-cols-md-3 row-cols-sm-2 row-cols-1"><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="tel:+85263301333"><div class="card-body"><div class="card-title h5"><i class="fa-solid fa-phone" style="color:#009688"></i></div><p class="text-muted card-text">6330 1333<!-- --> </p></div></a></div><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="mailto:michaelboyboy@gmail.com"><div class="card-body"><div class="card-title h5"><i class="fa-solid fa-envelope" style="color:#f44336"></i></div><p class="text-muted card-text">michaelboyboy@gmail.com<!-- --> </p></div></a></div><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="https://www.linkedin.com/in/mickchung"><div class="card-body"><div class="card-title h5"><i class="fa-brands fa-linkedin" style="color:#2196f3"></i></div><p class="text-muted card-text">www.linkedin.com/in/mickchung<!-- --> </p></div></a></div></div></div></div></div><script src="/e2-next/_next/static/chunks/webpack-f088da4552bcc253.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[8287,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n3:I[3339,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n4:I[1367,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n5:I[5244,[],\"\"]\n6:I[3866,[],\"\"]\n7:I[4798,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n8:I[6121,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n9:I[3667,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\na:I[8407,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nb:I[8173,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"\"]\nc:I[3197,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nd:I[7933,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\ne:I[3800,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n10:I[6213,[],\"OutletBoundary\"]\n12:I[6213,[],\"MetadataBoundary\"]\n14:I[6213,[],\"ViewportBoundary\"]\n16:I[4835,[],\"\"]\n:HL[\"/e2-next/_next/static/css/d3df112486f97f47.css\",\"style\"]\n:HL[\"/e2-next/_next/static/css/c3624a693ae5a0c4.css\",\"style\"]\nf:T500,// 無限 loop 既配置，一開始會行得密啲，之後就會放慢\r\nconst MAX_RUN = Infinity;\r\nconst DELAY_IN"])</script><script>self.__next_f.push([1,"CREMENT = 25;\r\nconst DELAY_MAX = 1000;\r\nvar delay = 25;\r\n\r\n// 用於 jQuery 既 CSS selector，喺 Chrome developer tools 既 Elements tab 可以用佢黎 search\r\nconst SELECTOR = `\r\n    .nav-tabs \u003e :not([id=auto-settings-btn]),\r\n    footer[id=ads-privacy-footer],\r\n    [id=sidebar],\r\n    div.tutorial-video-container,\r\n    div.media-cover,\r\n    div.search-control-nav-main,\r\n    [id=jw-player-container],\r\n    .search-header\r\n`;\r\n\r\nconst run = () =\u003e {\r\n\tlet i = 0;\r\n\r\n\tconst _run = () =\u003e {\r\n\t\tif (i === MAX_RUN) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ti++;\r\n\t\tconsole.log(\"Running iteration \" + i); // 喺 Chrome developer tools 既 Console 會見到\r\n\r\n\t\tconst result = $(SELECTOR);\r\n\r\n\t\tif (!(result.length \u003e 0)) {\r\n\t\t\t// 如果未搵到（可能係頁面未 load 好）\r\n\t\t\tsetTimeout(_run, delay);\r\n\t\t\tdelay = Math.min(delay + DELAY_INCREMENT, DELAY_MAX);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 將多餘野設置為唔顯示\r\n\r\n\t\tresult.css(\"display\", \"none\");\r\n\r\n\t\t$(\".media-library-top-container.show-ad\").removeClass(\"show-ad\");\r\n\r\n\t\tsetTimeout(_run, delay);\r\n\t\tdelay = Math.min(delay + DELAY_INCREMENT, DELAY_MAX);\r\n\t};\r\n\r\n\t_run();\r\n};\r\n\r\nrun(); // call 上面 define 既 run function\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"wfZ4FdS4ntgGvzjeKJhfw\",\"p\":\"/e2-next\",\"c\":[\"\",\"blog\",\"writing-chrome-extensions\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[\"(2020-10)\",{\"children\":[\"writing-chrome-extensions\",{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/e2-next/_next/static/css/d3df112486f97f47.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/e2-next/_next/static/css/c3624a693ae5a0c4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900\u0026display=swap\",\"rel\":\"stylesheet\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css\"}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"gap\":5,\"children\":[[\"$\",\"$L3\",null,{\"gap\":5,\"className\":\"text-center\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"code\",null,{\"className\":\"SiteHeader_name__cwQmL\",\"children\":\"Chung Cheuk Hang Michael\"}],[\"$\",\"code\",null,{\"className\":\"SiteHeader_title__CCfvI\",\"children\":\"Java Web Developer\"}]]}],[\"$\",\"$L4\",null,{}]]}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"hr\",null,{}],[\"$\",\"$L3\",null,{\"gap\":3,\"children\":[\"$\",\"$L7\",null,{\"className\":\"text-center\",\"children\":[\"$\",\"$L8\",null,{\"xs\":1,\"sm\":2,\"md\":3,\"className\":\"justify-content-center g-3\",\"children\":[[\"$\",\"$L9\",\"0\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"tel:+85263301333\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-solid fa-phone\",\"style\":{\"color\":\"#009688\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"6330 1333\",\" \"]}]]}]}]}],[\"$\",\"$L9\",\"1\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"mailto:michaelboyboy@gmail.com\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-solid fa-envelope\",\"style\":{\"color\":\"#f44336\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"michaelboyboy@gmail.com\",\" \"]}]]}]}]}],[\"$\",\"$L9\",\"2\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"https://www.linkedin.com/in/mickchung\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-brands fa-linkedin\",\"style\":{\"color\":\"#2196f3\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"www.linkedin.com/in/mickchung\",\" \"]}]]}]}]}]]}]}]}]]}]}]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"(2020-10)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"(2020-10)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"writing-chrome-extensions\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"(2020-10)\",\"children\",\"writing-chrome-extensions\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"h2\",null,{\"children\":\"1 關於 Chrome Extension\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"相信大家對 Chrome extension 都唔陌生，因為大部分人都係 ad blocker plugins 既 user，知道瀏覽器係可以安裝一啲小插件黎優化用戶體驗（UX）。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"其實呢啲小插件係可以自己寫，而且非常簡單。\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"2 需求情境\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"呢篇文章會教大家動手寫一個 Chrome extension，用黎去除 uTorrent Web 網頁各種各樣既多餘網頁 components，令到版面更簡潔。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"uTorrent Web 係一個專門用黎 BT 下載既電腦程式，需要自行下載安裝，佢個程式介面係用網頁既形式呈現，所以叫 uTorrent Web，有別於以前既 uTorrent（PC 客戶端）。\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"3 比較原貌及結果\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"先畀大家睇下我地既 before \u0026 after 會相差幾遠。\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"3.1 Before\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2020-10/writing-chrome-extensions/before-home-page.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2020-10/writing-chrome-extensions/before-downloading.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"3.2 After\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2020-10/writing-chrome-extensions/after-home-page.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2020-10/writing-chrome-extensions/after-downloading.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"4 動手寫\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"4.1 Project structure\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"我地呢個 project folder 會有以下檔案：\"}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"檔案\"}],[\"$\",\"th\",null,{\"children\":\"用途\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"manifest.json\"}]}],[\"$\",\"td\",null,{\"children\":\"關於呢個 Chrome extension 既 metadata。Chrome 會讀取，咁就知道邊啲網頁要用呢個 extension，邊啲唔洗，同埋知道需要執行既 JavaScript 資源既位置\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"content.js\"}]}],[\"$\",\"td\",null,{\"children\":[\"我地既程式入口，類似 Java 既 \",[\"$\",\"code\",null,{\"children\":\"main\"}],\" method，喺 Chrome load 完 dependency 既 libraries（即係我地既 \",[\"$\",\"code\",null,{\"children\":\"jquery.js\"}],\"）之後就會執行\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"js/jquery.js\"}]}],[\"$\",\"td\",null,{\"children\":\"jQuery 係一個打橫行既 JavaScript library，可以肆意修改整個 DOM tree，係傳統網頁必備既 library\"}]]}]]}]]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"4.2 寫 \",[\"$\",\"code\",null,{\"children\":\"manifest.json\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"manifest.json\"}],\" 負責話畀 Chrome 知道我地呢個 extension 既全名、簡單描述、URL 匹配同權限，以及要執行既 JavaScript 檔案。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"因為 uTorrent Web 既 URL 有時會係 \",[\"$\",\"code\",null,{\"children\":\"utweb.trontv.com\"}],\" 有時會係 \",[\"$\",\"code\",null,{\"children\":\"127.0.0.1\"}],\"，所以就有兩個，但一般都只係得一個。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"至於 \",[\"$\",\"code\",null,{\"children\":\"js\"}],\"，次序一定要岩，dependency libraries 行先，之後先到我地寫既入口主程式（類似 Java 既 \",[\"$\",\"code\",null,{\"children\":\"main\"}],\" method）。\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-json\",\"children\":\"{\\r\\n\\t\\\"name\\\": \\\"uTorrent Web Plugin\\\",\\r\\n\\t\\\"version\\\": \\\"1.0\\\",\\r\\n\\t\\\"description\\\": \\\"Remove ads\\\",\\r\\n\\t\\\"content_scripts\\\": [\\r\\n\\t\\t{\\r\\n\\t\\t\\t\\\"matches\\\": [\\\"*://utweb.trontv.com/*\\\", \\\"*://127.0.0.1/*\\\"],\\r\\n\\t\\t\\t\\\"js\\\": [\\\"js/jquery.js\\\", \\\"content.js\\\"],\\r\\n\\t\\t\\t\\\"run_at\\\": \\\"document_start\\\"\\r\\n\\t\\t}\\r\\n\\t],\\r\\n\\t\\\"manifest_version\\\": 2\\r\\n}\\n\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"4.3 寫 \",[\"$\",\"code\",null,{\"children\":\"content.js\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"我地想要一個簡潔版本既 uTorrent Web，其實只需要不斷將多餘既 components 刪除就可以。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Windows 下撳 \",[\"$\",\"code\",null,{\"children\":\"F12\"}],\" 或者 macOS 下撳 \",[\"$\",\"code\",null,{\"children\":\"Option\"}],\" + \",[\"$\",\"code\",null,{\"children\":\"Command\"}],\" + \",[\"$\",\"code\",null,{\"children\":\"I\"}],\"，然後喺 Chrome developer tools 既 Elements tab 下撳左上角既箭嘴掣，手動黎喺頁面上視覺定位不同既多餘 DOM nodes，Chrome developer tools 會幫我地定位 DOM node 既位置，然後我地可以自行判決點樣 programmatically 定位呢啲 DOM nodes。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"我地會想寫到呢個 Chrome extension 可以無限 loop 咁行，因為有時啲網頁完成加載既時間可能好長，有啲 components 亦可能係之後先加入，亦可能因為某啲操作（當我地新增 BT 下載任務既時候）而令頁面再次改變，所以係有必要無限 loop。\"}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"多餘既 DOM node（CSS selector）\"}],[\"$\",\"th\",null,{\"children\":\"對應頁面位置\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\".nav-tabs \u003e :not([id=auto-settings-btn])\"}]}],[\"$\",\"td\",null,{\"children\":\"頂部右方設定掣左邊既兩個掣，分別係 Safe Torrrent Scanner 及 Help\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"footer[id=ads-privacy-footer]\"}]}],[\"$\",\"td\",null,{\"children\":\"最底既 Terms of Service、Privacy Policy 及 copyright\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"[id=sidebar]\"}]}],[\"$\",\"td\",null,{\"children\":\"左手邊既 sidebar menu\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"div.tutorial-video-container\"}]}],[\"$\",\"td\",null,{\"children\":\"正右方既 Watch this video on torrenting 連影片\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"div.media-cover\"}]}],[\"$\",\"td\",null,{\"children\":\"當有下載任務時，下載任務左手邊有個影片播放器\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"div.search-control-nav-main\"}]}],[\"$\",\"td\",null,{\"children\":\"正中既 Search for a torrent 搜尋列\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"[id=jw-player-container]\"}]}],[\"$\",\"td\",null,{\"children\":\"正下方既影片\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\".search-header\"}]}],[\"$\",\"td\",null,{\"children\":\"正中既 Stream torrents while you download\"}]]}]]}]]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-js\",\"children\":\"$f\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"4.4 下載 \",[\"$\",\"code\",null,{\"children\":\"jquery.js\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"正因為 jQuery 太強大，可以肆意修改整個 DOM tree，所以佢係傳統網頁必備既 dependency library（但新派做法已經棄用 jQuery）。正正就係我地刪除多餘 DOM nodes 需要用到。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"我地需要將呢個 jQuery library 既 code 下載落黎。只需要 right click 下面條 link，save as \",[\"$\",\"code\",null,{\"children\":\"js/jquery.js\"}],\" 即可：\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://code.jquery.com/jquery-3.5.1.min.js\",\"children\":\"https://code.jquery.com/jquery-3.5.1.min.js\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"5 安裝\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"去 \",[\"$\",\"code\",null,{\"children\":\"chrome://extensions\"}],\" 度，打開右上角 Developer mode 既開關，撳 Load unpacked，然後揀我地個 project folder。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"之後我地會見到多左個我地個 Chrome extension（請確保開關掣係開住）。呢個時候我地可以 refresh 一下 uTorrent Web 個網頁，\",[\"$\",\"a\",null,{\"href\":\"#32-after\",\"children\":\"就會見到係極致地簡潔！\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2020-10/writing-chrome-extensions/chrome-extensions.png\",\"alt\":\"\"}]}]],null,[\"$\",\"$L10\",null,{\"children\":\"$L11\"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"a0repjHyH8Jhzy-Q4QVQK\",{\"children\":[[\"$\",\"$L12\",null,{\"children\":\"$L13\"}],[\"$\",\"$L14\",null,{\"children\":\"$L15\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$16\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"15:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n13:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Michael Chung's e-Portfolio\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Powered by Next.js and React\"}]]\n"])</script><script>self.__next_f.push([1,"11:null\n"])</script></body></html>