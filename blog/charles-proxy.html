<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="blog/2021-08/charles-proxy/start-recording.png"/><link rel="preload" as="image" href="blog/2021-08/charles-proxy/internet-options-proxy.png"/><link rel="preload" as="image" href="blog/2021-08/charles-proxy/network-proxies.png"/><link rel="preload" as="image" href="blog/2021-08/charles-proxy/network-proxies-ssl.png"/><link rel="preload" as="image" href="blog/2021-08/charles-proxy/focus-on-domain.png"/><link rel="preload" as="image" href="blog/2021-08/charles-proxy/check-focused.png"/><link rel="preload" as="image" href="blog/2021-08/charles-proxy/view-focused-http-requests.png"/><link rel="preload" as="image" href="blog/2021-08/charles-proxy/jumbo-getprod.png"/><link rel="preload" as="image" href="blog/2021-08/charles-proxy/postman-proxy.png"/><link rel="stylesheet" href="/e2-next/_next/static/css/d3df112486f97f47.css" data-precedence="next"/><link rel="stylesheet" href="/e2-next/_next/static/css/c3624a693ae5a0c4.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/e2-next/_next/static/chunks/webpack-f088da4552bcc253.js"/><script src="/e2-next/_next/static/chunks/4bd1b696-120f4d9c40d223dd.js" async=""></script><script src="/e2-next/_next/static/chunks/1517-c8d232d43a11224c.js" async=""></script><script src="/e2-next/_next/static/chunks/main-app-05c45cc8f30d6cea.js" async=""></script><script src="/e2-next/_next/static/chunks/7829-b7b9eb1dbe0d40e4.js" async=""></script><script src="/e2-next/_next/static/chunks/2153-45fd9844831c6348.js" async=""></script><script src="/e2-next/_next/static/chunks/app/layout-ea91c2d128ec48c2.js" async=""></script><script src="/e2-next/_next/static/chunks/app/page-c8b940db14fac9a0.js" async=""></script><title>Michael Chung&#x27;s e-Portfolio</title><meta name="description" content="Powered by Next.js and React"/><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/><script src="/e2-next/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="vstack gap-5"><div class="text-center vstack gap-5"><div><code class="SiteHeader_name__cwQmL">Chung Cheuk Hang Michael</code><code class="SiteHeader_title__CCfvI">Java Web Developer</code></div><nav class="justify-content-center navbar navbar-expand-md navbar-dark"><button type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="justify-content-center navbar-collapse collapse"><div class="justify-content-center navbar-nav nav-underline"><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/" class="nav-link" href="/e2-next">Home</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/work" class="nav-link" href="/e2-next/work">Work</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/hobbyProjects" class="nav-link" href="/e2-next/hobbyProjects">Hobby projects</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/personality" class="nav-link" href="/e2-next/personality">Personality</a></div><div class="nav-item"><a draggable="false" data-rr-ui-event-key="/blog" class="nav-link" href="/e2-next/blog">Blog</a></div></div></div></nav></div><h1>1 Charles Proxy 用途</h1>
<p>Charles 係一個 proxy（代理伺服器），即係一個虛擬既中間人 server，有能力截取通過呢個 proxy 通訊既 HTTP/HTTPS（SSL）既請求及響應內容，所以可以用喺開發既時候除錯 web applications。</p>
<hr/>
<h1>2 設定 Charles</h1>
<h2>2.1 主程式設置</h2>
<ul>
<li>Windows<!-- -->
<ol>
<li>Proxy &gt; SSL Proxying Settings... &gt; SSL Proxying tab &gt; Add &gt; Host: <code>*</code></li>
<li>Help &gt; SSL Proxying &gt; <strong>Install Charles Root Certificate</strong></li>
<li>In the Certificate popup window, <strong>Install Certificate...</strong></li>
<li>Store Location: <code>Local Machine</code></li>
<li>Place all certificates in the following store, Browse..., <code>Trusted Root Certification Authorities</code></li>
<li>Main UI &gt; <strong>Start SSL Proxying</strong></li>
</ol>
</li>
<li>macOS<!-- -->
<ol>
<li>Proxy &gt; SSL Proxying Settings... &gt; SSL Proxying tab &gt; Add &gt; Host: <code>*</code></li>
<li>Help &gt; SSL Proxying &gt; <strong>Install Charles Root Certificate</strong></li>
<li>In the Add Certificates popup window, Keychain: <code>System</code>, Add</li>
<li>In System Keychains &gt; System, Search for Charles</li>
<li>Right-click Charles Proxy CA &gt; Get Info</li>
<li>Expand Trust &gt; When using this certificate &gt; <code>Always Trust</code></li>
</ol>
</li>
</ul>
<hr/>
<h2>2.2 截取 Android 手機 HTTP/HTTPS 內容</h2>
<ol>
<li>主程式設置<!-- -->
<ul>
<li>Windows<!-- -->
<ol>
<li>Make sure <strong>Windows Defender Firewall</strong> settings allow the Charles app<!-- -->
<ul>
<li>Check the checkbox next to the app and checkboxes under both private and public</li>
</ul>
</li>
<li>Proxy &gt; Proxy Settings... &gt; <strong>Enable transparent HTTP proxying</strong></li>
<li>Help &gt; SSL Proxying &gt; <strong>Install Charles Root Certificate on a Mobile Device or Remote Browser</strong></li>
</ol>
</li>
<li>macOS<!-- -->
<ul>
<li>TBC</li>
</ul>
</li>
</ul>
</li>
<li>Android 手機設置<!-- -->
<ol>
<li>Wi-Fi &gt; Configure the current Wi-Fi</li>
<li>Add the IP to Charles on Windows: Proxy &gt; Access Control Settings... &gt; Add</li>
<li>Proxy: <code>Manual</code>, IP and Port: refer to the popup in Charles</li>
<li>In Chrome, navigate to the URL mentioned in popup in Charles (i.e. <a href="http://chls.pro/ssl">chls.pro/ssl</a>)</li>
<li>SSL certificate (<code>.crt</code>) is downloaded automatically, click on it</li>
<li>Enter Android password</li>
<li>Give the certificate a name (e.g. <code>Charles</code>), Credential use: <code>VPN and Apps</code></li>
</ol>
</li>
</ol>
<hr/>
<h2>2.3 其他設定</h2>
<ul>
<li>Main UI &gt; Right-click configure column &gt; Check <code>Content-Type</code></li>
<li>Main UI &gt; Settings next to Filter and Focused &gt; Uncheck <strong>Auto scroll</strong></li>
</ul>
<hr/>
<h1>3 如何使用 Charles</h1>
<p>情境：我地想截取 Jumbo 網頁既 HTTP request 及 response，除左直接喺 Chrome developer tools 度睇之外，Charles 都可以做得到。</p>
<h2>3.1 開始記錄 HTTP 流量</h2>
<p>首先，換去 Sequence 顯示方式，然後確保 Charles 主介面已經開始記錄 HTTP 流量，而且 SSL proxying 亦都設置好而又開左：</p>
<p><img src="blog/2021-08/charles-proxy/start-recording.png" alt=""/></p>
<p>我地可以去 Windows 既 Internet Options 度睇下 Charles 係咪自動幫我地設定好曬：</p>
<p><img src="blog/2021-08/charles-proxy/internet-options-proxy.png" alt=""/></p>
<p>或者如果用 macOS：</p>
<p><img src="blog/2021-08/charles-proxy/network-proxies.png" alt=""/></p>
<p><img src="blog/2021-08/charles-proxy/network-proxies-ssl.png" alt=""/></p>
<hr/>
<h2>3.2 瀏覽器開始上網</h2>
<p>我地而家可以喺 Chrome 打開 <a href="https://shoponjc.com/quote.php">https://shoponjc.com/quote.php</a>。</p>
<hr/>
<h2>3.3 觀察截取結果</h2>
<p>網頁 load 完之後，我地就返去 Charles，觀察 Charles 所截取到既 HTTP requests。</p>
<p>如果 Charles 介面夾雜左其他 domains 既 HTTP requests，可能係因為個系統所安裝既某啲軟件或者瀏覽器既其他網頁喺背後發起 HTTP requests。如果只想專注睇 Jumbo 網站既 HTTP requests，可以隨意搵一個 Jumbo 既 HTTP request，然後 right-click 佢，撳 Focus。</p>
<p><img src="blog/2021-08/charles-proxy/focus-on-domain.png" alt=""/></p>
<p>再 check Focused：</p>
<p><img src="blog/2021-08/charles-proxy/check-focused.png" alt=""/></p>
<p>咁之後我地就只會見到 Jumbo 網站既 HTTP requests：</p>
<p><img src="blog/2021-08/charles-proxy/view-focused-http-requests.png" alt=""/></p>
<p>然後就好容易搵到下載產品報價數據既 API 係點樣 call：</p>
<p><img src="blog/2021-08/charles-proxy/jumbo-getprod.png" alt=""/></p>
<hr/>
<h1>4 其他程式設定</h1>
<h2>4.1 Postman</h2>
<ol>
<li>Settings &gt; Proxy &gt; Proxy configurations for sending requests &gt; Check <strong>Add a custom proxy configuration</strong></li>
<li>Proxy Type &gt; Check <strong>HTTP</strong> and <strong>HTTPS</strong></li>
<li>Proxy Server &gt; Enter IP and port</li>
</ol>
<p><img src="blog/2021-08/charles-proxy/postman-proxy.png" alt=""/></p>
<hr/>
<h2>4.2 Spring Boot <code>RestTemplate</code></h2>
<p>用以下 code 黎 create <code>RestTemplate</code> object：</p>
<pre><code class="language-java">final Proxy proxy = new Proxy(Type.HTTP, new InetSocketAddress(getProperty(&quot;http.proxyHost&quot;), parseInt(getProperty(&quot;http.proxyPort&quot;))));
final SimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();
requestFactory.setProxy(proxy);

final RestTemplate restTemplate = new RestTemplate(requestFactory);
</code></pre>
<p>JVM arguments：</p>
<pre><code class="language-plaintext">java -Dhttp.proxyHost=&lt;host&gt; -Dhttp.proxyPort=8888 -jar xxxxxx.jar
</code></pre>
<p>Spring Boot Maven：</p>
<pre><code class="language-bash">mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-Dhttp.proxyHost=&lt;host&gt; -Dhttp.proxyPort=8888&quot;
</code></pre><hr/><div class="vstack gap-3"><div class="text-center container"><div class="justify-content-center g-3 row row-cols-md-3 row-cols-sm-2 row-cols-1"><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="tel:+85263301333"><div class="card-body"><div class="card-title h5"><i class="fa-solid fa-phone" style="color:#009688"></i></div><p class="text-muted card-text">6330 1333<!-- --> </p></div></a></div><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="mailto:michaelboyboy@gmail.com"><div class="card-body"><div class="card-title h5"><i class="fa-solid fa-envelope" style="color:#f44336"></i></div><p class="text-muted card-text">michaelboyboy@gmail.com<!-- --> </p></div></a></div><div class="col"><a target="_blank" rel="external nofollow noopener noreferrer" class="SiteFooter_contact-item__2JRRr card" href="https://www.linkedin.com/in/mickchung"><div class="card-body"><div class="card-title h5"><i class="fa-brands fa-linkedin" style="color:#2196f3"></i></div><p class="text-muted card-text">www.linkedin.com/in/mickchung<!-- --> </p></div></a></div></div></div></div></div><script src="/e2-next/_next/static/chunks/webpack-f088da4552bcc253.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[8287,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n3:I[3339,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n4:I[1367,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\n5:I[5244,[],\"\"]\n6:I[3866,[],\"\"]\n7:I[4798,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n8:I[6121,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\n9:I[3667,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"default\"]\na:I[8407,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nb:I[8173,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"8974\",\"static/chunks/app/page-c8b940db14fac9a0.js\"],\"\"]\nc:I[3197,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nd:I[7933,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\ne:I[3800,[\"7829\",\"static/chunks/7829-b7b9eb1dbe0d40e4.js\",\"2153\",\"static/chunks/2153-45fd9844831c6348.js\",\"7177\",\"static/chunks/app/layout-ea91c2d128ec48c2.js\"],\"default\"]\nf:I[6213,[],\"OutletBoundary\"]\n11:I[6213,[],\"MetadataBoundary\"]\n13:I[6213,[],\"ViewportBoundary\"]\n15:I[4835,[],\"\"]\n:HL[\"/e2-next/_next/static/css/d3df112486f97f47.css\",\"style\"]\n:HL[\"/e2-next/_next/static/css/c3624a693ae5a0c4.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"wfZ4FdS4ntgGvzjeKJhfw\",\"p\":\"/e2-next\",\"c\":[\"\",\"blog\",\"charles-proxy\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[\"(2021-08)\",{\"children\":[\"charles-proxy\",{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/e2-next/_next/static/css/d3df112486f97f47.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/e2-next/_next/static/css/c3624a693ae5a0c4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900\u0026display=swap\",\"rel\":\"stylesheet\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css\"}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"gap\":5,\"children\":[[\"$\",\"$L3\",null,{\"gap\":5,\"className\":\"text-center\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"code\",null,{\"className\":\"SiteHeader_name__cwQmL\",\"children\":\"Chung Cheuk Hang Michael\"}],[\"$\",\"code\",null,{\"className\":\"SiteHeader_title__CCfvI\",\"children\":\"Java Web Developer\"}]]}],[\"$\",\"$L4\",null,{}]]}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"hr\",null,{}],[\"$\",\"$L3\",null,{\"gap\":3,\"children\":[\"$\",\"$L7\",null,{\"className\":\"text-center\",\"children\":[\"$\",\"$L8\",null,{\"xs\":1,\"sm\":2,\"md\":3,\"className\":\"justify-content-center g-3\",\"children\":[[\"$\",\"$L9\",\"0\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"tel:+85263301333\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-solid fa-phone\",\"style\":{\"color\":\"#009688\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"6330 1333\",\" \"]}]]}]}]}],[\"$\",\"$L9\",\"1\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"mailto:michaelboyboy@gmail.com\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-solid fa-envelope\",\"style\":{\"color\":\"#f44336\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"michaelboyboy@gmail.com\",\" \"]}]]}]}]}],[\"$\",\"$L9\",\"2\",{\"children\":[\"$\",\"$La\",null,{\"as\":\"$b\",\"href\":\"https://www.linkedin.com/in/mickchung\",\"target\":\"_blank\",\"rel\":\"external nofollow noopener noreferrer\",\"className\":\"SiteFooter_contact-item__2JRRr\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"i\",null,{\"className\":\"fa-brands fa-linkedin\",\"style\":{\"color\":\"#2196f3\"}}]}],[\"$\",\"$Le\",null,{\"className\":\"text-muted\",\"children\":[\"www.linkedin.com/in/mickchung\",\" \"]}]]}]}]}]]}]}]}]]}]}]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"(2021-08)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"(2021-08)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"charles-proxy\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"(2021-08)\",\"children\",\"charles-proxy\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"h1\",null,{\"children\":\"1 Charles Proxy 用途\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Charles 係一個 proxy（代理伺服器），即係一個虛擬既中間人 server，有能力截取通過呢個 proxy 通訊既 HTTP/HTTPS（SSL）既請求及響應內容，所以可以用喺開發既時候除錯 web applications。\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"2 設定 Charles\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"2.1 主程式設置\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Windows\",\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Proxy \u003e SSL Proxying Settings... \u003e SSL Proxying tab \u003e Add \u003e Host: \",[\"$\",\"code\",null,{\"children\":\"*\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Help \u003e SSL Proxying \u003e \",[\"$\",\"strong\",null,{\"children\":\"Install Charles Root Certificate\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"In the Certificate popup window, \",[\"$\",\"strong\",null,{\"children\":\"Install Certificate...\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Store Location: \",[\"$\",\"code\",null,{\"children\":\"Local Machine\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Place all certificates in the following store, Browse..., \",[\"$\",\"code\",null,{\"children\":\"Trusted Root Certification Authorities\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Main UI \u003e \",[\"$\",\"strong\",null,{\"children\":\"Start SSL Proxying\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"macOS\",\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Proxy \u003e SSL Proxying Settings... \u003e SSL Proxying tab \u003e Add \u003e Host: \",[\"$\",\"code\",null,{\"children\":\"*\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Help \u003e SSL Proxying \u003e \",[\"$\",\"strong\",null,{\"children\":\"Install Charles Root Certificate\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"In the Add Certificates popup window, Keychain: \",[\"$\",\"code\",null,{\"children\":\"System\"}],\", Add\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"In System Keychains \u003e System, Search for Charles\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Right-click Charles Proxy CA \u003e Get Info\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Expand Trust \u003e When using this certificate \u003e \",[\"$\",\"code\",null,{\"children\":\"Always Trust\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"2.2 截取 Android 手機 HTTP/HTTPS 內容\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"主程式設置\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Windows\",\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Make sure \",[\"$\",\"strong\",null,{\"children\":\"Windows Defender Firewall\"}],\" settings allow the Charles app\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Check the checkbox next to the app and checkboxes under both private and public\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Proxy \u003e Proxy Settings... \u003e \",[\"$\",\"strong\",null,{\"children\":\"Enable transparent HTTP proxying\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Help \u003e SSL Proxying \u003e \",[\"$\",\"strong\",null,{\"children\":\"Install Charles Root Certificate on a Mobile Device or Remote Browser\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"macOS\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"TBC\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Android 手機設置\",\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Wi-Fi \u003e Configure the current Wi-Fi\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Add the IP to Charles on Windows: Proxy \u003e Access Control Settings... \u003e Add\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Proxy: \",[\"$\",\"code\",null,{\"children\":\"Manual\"}],\", IP and Port: refer to the popup in Charles\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"In Chrome, navigate to the URL mentioned in popup in Charles (i.e. \",[\"$\",\"a\",null,{\"href\":\"http://chls.pro/ssl\",\"children\":\"chls.pro/ssl\"}],\")\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"SSL certificate (\",[\"$\",\"code\",null,{\"children\":\".crt\"}],\") is downloaded automatically, click on it\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Enter Android password\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Give the certificate a name (e.g. \",[\"$\",\"code\",null,{\"children\":\"Charles\"}],\"), Credential use: \",[\"$\",\"code\",null,{\"children\":\"VPN and Apps\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"2.3 其他設定\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Main UI \u003e Right-click configure column \u003e Check \",[\"$\",\"code\",null,{\"children\":\"Content-Type\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Main UI \u003e Settings next to Filter and Focused \u003e Uncheck \",[\"$\",\"strong\",null,{\"children\":\"Auto scroll\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"3 如何使用 Charles\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"情境：我地想截取 Jumbo 網頁既 HTTP request 及 response，除左直接喺 Chrome developer tools 度睇之外，Charles 都可以做得到。\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"3.1 開始記錄 HTTP 流量\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"首先，換去 Sequence 顯示方式，然後確保 Charles 主介面已經開始記錄 HTTP 流量，而且 SSL proxying 亦都設置好而又開左：\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2021-08/charles-proxy/start-recording.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"我地可以去 Windows 既 Internet Options 度睇下 Charles 係咪自動幫我地設定好曬：\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2021-08/charles-proxy/internet-options-proxy.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"或者如果用 macOS：\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2021-08/charles-proxy/network-proxies.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2021-08/charles-proxy/network-proxies-ssl.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"3.2 瀏覽器開始上網\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"我地而家可以喺 Chrome 打開 \",[\"$\",\"a\",null,{\"href\":\"https://shoponjc.com/quote.php\",\"children\":\"https://shoponjc.com/quote.php\"}],\"。\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"3.3 觀察截取結果\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"網頁 load 完之後，我地就返去 Charles，觀察 Charles 所截取到既 HTTP requests。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"如果 Charles 介面夾雜左其他 domains 既 HTTP requests，可能係因為個系統所安裝既某啲軟件或者瀏覽器既其他網頁喺背後發起 HTTP requests。如果只想專注睇 Jumbo 網站既 HTTP requests，可以隨意搵一個 Jumbo 既 HTTP request，然後 right-click 佢，撳 Focus。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2021-08/charles-proxy/focus-on-domain.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"再 check Focused：\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2021-08/charles-proxy/check-focused.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"咁之後我地就只會見到 Jumbo 網站既 HTTP requests：\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2021-08/charles-proxy/view-focused-http-requests.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"然後就好容易搵到下載產品報價數據既 API 係點樣 call：\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2021-08/charles-proxy/jumbo-getprod.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"4 其他程式設定\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"4.1 Postman\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Settings \u003e Proxy \u003e Proxy configurations for sending requests \u003e Check \",[\"$\",\"strong\",null,{\"children\":\"Add a custom proxy configuration\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Proxy Type \u003e Check \",[\"$\",\"strong\",null,{\"children\":\"HTTP\"}],\" and \",[\"$\",\"strong\",null,{\"children\":\"HTTPS\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Proxy Server \u003e Enter IP and port\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"blog/2021-08/charles-proxy/postman-proxy.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":[\"4.2 Spring Boot \",[\"$\",\"code\",null,{\"children\":\"RestTemplate\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"用以下 code 黎 create \",[\"$\",\"code\",null,{\"children\":\"RestTemplate\"}],\" object：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-java\",\"children\":\"final Proxy proxy = new Proxy(Type.HTTP, new InetSocketAddress(getProperty(\\\"http.proxyHost\\\"), parseInt(getProperty(\\\"http.proxyPort\\\"))));\\r\\nfinal SimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();\\r\\nrequestFactory.setProxy(proxy);\\r\\n\\r\\nfinal RestTemplate restTemplate = new RestTemplate(requestFactory);\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"JVM arguments：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-plaintext\",\"children\":\"java -Dhttp.proxyHost=\u003chost\u003e -Dhttp.proxyPort=8888 -jar xxxxxx.jar\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Spring Boot Maven：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"mvn spring-boot:run -Dspring-boot.run.jvmArguments=\\\"-Dhttp.proxyHost=\u003chost\u003e -Dhttp.proxyPort=8888\\\"\\n\"}]}]],null,[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"aqjqiWoWhRhdyk6UkxBut\",{\"children\":[[\"$\",\"$L11\",null,{\"children\":\"$L12\"}],[\"$\",\"$L13\",null,{\"children\":\"$L14\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$15\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"14:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n12:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Michael Chung's e-Portfolio\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Powered by Next.js and React\"}]]\n"])</script><script>self.__next_f.push([1,"10:null\n"])</script></body></html>